<!DOCTYPE html>
<html>

<head>

<meta charset="UTF-8">
<meta name=viewport content="width=device-width, initial-scale=1">
<meta name="robots" content="noindex">

<title>Sort-Based and Hash-Based Memory-Constrained Operators - Apache Drill</title>

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<link href='https://fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'/>
<link href="/drill/css/site.css" rel="stylesheet" type="text/css"/>

<link rel="shortcut icon" href="/drill/zh/favicon.ico" type="image/x-icon"/>
<link rel="icon" href="/drill/zh/favicon.ico" type="image/x-icon"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" language="javascript" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js" language="javascript" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="/drill/js/modernizr.custom.js"></script>
<script language="javascript" type="text/javascript" src="/drill/js/script.js"></script>
<script language="javascript" type="text/javascript" src="/drill/js/drill.js"></script>

</head>


<body onResize="resized();">
  <div class="page-wrap">
    <div class="bui"></div>

<div id="menu" class="mw">
<ul>
  <li class='toc-categories'>
  <a class="expand-toc-icon" href="javascript:void(0);"><i class="fa fa-bars"></i></a>
  </li>
  <li class="logo"><a href="/drill/zh/"></a></li>
  <li class='expand-menu'>
  <a href="javascript:void(0);"><span class='menu-text'>Menu</span><span class='expand-icon'><i class="fa fa-bars"></i></span></a>
  </li>
  <li class="clear-float"></li>
  <li class="nav">
	<a>Language</a>
	<ul>
		
		<li>
			<a  href="/drill/docs/sort-based-and-hash-based-memory-constrained-operators/" >en</a>
		</li>
		
		<li>
			<a style="font-weight: bold;" href="/drill/zh/docs/sort-based-and-hash-based-memory-constrained-operators/" >zh</a>
		</li>
		
	</ul>
  </li>
  <li class="apache-link">
    <a href="/drill/zh/apacheASF/">Apache</a>
  </li>
  <li class="poweredby">
    <a href="/drill/zh/poweredBy">Powered By</a>
  </li>
  <li class="documentation-menu">
    <a href="/drill/zh/docs/">Documentation</a>
    <ul>
      
        <li><a href="/drill/zh/docs/getting-started/">新手开始</a></li>
      
        <li><a href="/drill/zh/docs/architecture/">Architecture</a></li>
      
        <li><a href="/drill/zh/docs/tutorials/">教程</a></li>
      
        <li><a href="/drill/zh/docs/drill-on-yarn/">Drill-on-YARN</a></li>
      
        <li><a href="/drill/zh/docs/install-drill/">Install Drill</a></li>
      
        <li><a href="/drill/zh/docs/configure-drill/">Configure Drill</a></li>
      
        <li><a href="/drill/zh/docs/connect-a-data-source/">Connect a Data Source</a></li>
      
        <li><a href="/drill/zh/docs/odbc-jdbc-interfaces/">ODBC/JDBC Interfaces</a></li>
      
        <li><a href="/drill/zh/docs/query-data/">Query Data</a></li>
      
        <li><a href="/drill/zh/docs/performance-tuning/">Performance Tuning</a></li>
      
        <li><a href="/drill/zh/docs/log-and-debug/">Log and Debug</a></li>
      
        <li><a href="/drill/zh/docs/sql-reference/">SQL Reference</a></li>
      
        <li><a href="/drill/zh/docs/data-sources-and-file-formats/">Data Sources and File Formats</a></li>
      
        <li><a href="/drill/zh/docs/develop-custom-functions/">Develop Custom Functions</a></li>
      
        <li><a href="/drill/zh/docs/troubleshooting/">Troubleshooting</a></li>
      
        <li><a href="/drill/zh/docs/developer-information/">Developer Information</a></li>
      
        <li><a href="/drill/zh/docs/release-notes/">Release Notes</a></li>
      
        <li><a href="/drill/zh/docs/sample-datasets/">Sample Datasets</a></li>
      
        <li><a href="/drill/zh/docs/project-bylaws/">Project Bylaws</a></li>
      
        <li><a href="/drill/zh/docs/ecosystem/">Ecosystem</a></li>
      
    </ul>
  </li>
  <li class='nav'>
    <a href="/drill/zh/community-resources/">Community</a>
    <ul>
      <li><a href="/drill/zh/team/">Team</a></li>
      <li><a href="/drill/zh/mailinglists/">Mailing Lists</a></li>
      <li><a href="/drill/zh/community-resources/">Community Resources</a></li>
    </ul>
  </li>
  <li class='nav'><a href="/drill/zh/faq/">FAQ</a></li>
  <li class='nav'><a href="/drill/zh/blog/">Blog</a></li>
  <li class="social-menu-item"><a href="https://twitter.com/apachedrill" title="apachedrill on twitter" target="_blank"><img src="/drill/images/twitter_32_26_white.png" alt="twitter logo" align="center"></a> </li>
  <li class="social-menu-item"><a href="https://join.slack.com/t/apache-drill/shared_invite/enQtNTQ4MjM1MDA3MzQ2LTJlYmUxMTRkMmUwYmQ2NTllYmFmMjU4MDk0NjYwZjBmYjg0MDZmOTE2ZDg0ZjBlYmI3Yjc4Y2I2NTQyNGVlZTc" title="Apache Drill Slack channels"
      target="_blank"><img src="/drill/images/slack-logo.svg" alt="Slack logo" align="center"></a> </li>
  <li class='search-bar'>
    <form id="drill-search-form">
      <input type="text" placeholder="Search Apache Drill" id="drill-search-term" />
      <button type="submit">
        <i class="fa fa-search"></i>
      </button>
    </form>
  </li>
  <li class="d">
    <a href="/drill/zh/download/">
      <i class="fa fa-cloud-download"></i> Download
    </a>
  </li>
</ul>
</div>

    <link href="/drill/css/content.css" rel="stylesheet" type="text/css">


      




<aside class="sidebar">
  <div class="docsidebar">
    <div class="docsidebarwrapper">
      <ul style="display: block;">
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">新手开始</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/drill-introduction/">什么是 Drill</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/why-drill/">为什么选择 Drill</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Architecture</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/architecture-introduction/">Architecture Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/drill-query-execution/">Drill Query Execution</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/core-modules/">Core Modules</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/performance/">Performance</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">教程</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/tutorials-introduction/">教程介绍</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/drill-in-10-minutes/">10分钟了解 Drill</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/analyzing-the-yelp-academic-dataset/">分析 Yelp 学术数据集</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">搭配 MapR Sandbox 学习 Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/about-the-mapr-sandbox/">关于 MapR 沙盒</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-the-apache-drill-sandbox/">安装 Apache Drill SandBox</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/getting-to-know-the-drill-sandbox/">了解 Drill Sandbox</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/lesson-1-learn-about-the-data-set/">第一课: 学习数据集</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/lesson-2-run-queries-with-ansi-sql/">第二课: 使用 ANSI SQL 查询</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/lesson-3-run-queries-on-complex-data-types/">第三课: 查询复杂数据类型</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/summary/">总结</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/analyzing-highly-dynamic-datasets/">分析高动态数据集</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/analyzing-social-media/">分析社交媒体</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/analyzing-data-using-window-functions/">通过窗口函数分析数据集</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/orchestrating-queries-with-airflow/">Orchestrating queries with Airflow</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Drill-on-YARN</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/drill-on-yarn-introduction/">Drill-on-YARN Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/creating-a-basic-drill-cluster/">Creating a Basic Drill Cluster</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/launch-drill-under-yarn/">Launch Drill Under YARN</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/configuration-reference/">Configuration Reference</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/drill-on-yarn-command-line-tool/">Drill-on-YARN Command-Line Tool</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/using-the-drill-on-yarn-web-ui/">Using the Drill-on-YARN Web UI</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/multiple-drill-clusters/">Multiple Drill Clusters</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/enabling-web-ui-security/">Enabling Web UI Security</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/appendix-a-release-note-issues/">Appendix A: Release Note Issues</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/appendix-b-drill-env-sh-settings/">Appendix B: drill-env.sh Settings</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/appendix-c-troubleshooting/">Appendix C: Troubleshooting</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/appendix-d-recreate-the-drill-archive/">Appendix D: Recreate the Drill Archive</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Install Drill</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/install-drill-introduction/">Install Drill Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/migrating-parquet-data/">Migrating Parquet Data</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Installing Drill in Embedded Mode</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/embedded-mode-prerequisites/">Embedded Mode Prerequisites</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/running-drill-on-docker/">Running Drill on Docker</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-drill-on-linux-and-mac-os-x/">Installing Drill on Linux and Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/starting-drill-on-linux-and-mac-os-x/">Starting Drill on Linux and Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-drill-on-windows/">Installing Drill on Windows</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/starting-drill-on-windows/">Starting Drill on Windows</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Installing Drill in Distributed Mode</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/distributed-mode-prerequisites/">Distributed Mode Prerequisites</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-drill-on-the-cluster/">Installing Drill on the Cluster</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/starting-drill-in-distributed-mode/">Starting Drill in Distributed Mode</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/starting-the-web-ui/">Starting the Web UI</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/stopping-drill/">Stopping Drill</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/identifying-multiple-drill-versions-in-a-cluster/">Identifying Multiple Drill Versions in a Cluster</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Configure Drill</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/configure-drill-introduction/">Configure Drill Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/configuring-drill-memory/">Configuring Drill Memory</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Securing Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/securing-drill-introduction/">Securing Drill Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/secure-communication-paths/">Secure Communication Paths</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/roles-and-privileges/">Roles and Privileges</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-user-impersonation/">Configuring User Impersonation</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-inbound-impersonation/">Configuring Inbound Impersonation</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-user-impersonation-with-hive-authorization/">Configuring User Impersonation with Hive Authorization</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-user-security/">Configuring User Security</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-plain-security/">Configuring Plain Security</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-ssl-tls-for-encryption/">Configuring SSL/TLS for Encryption</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-libpam4j-as-the-pam-authenticator/">Using libpam4j as the PAM Authenticator</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-jpam-as-the-pam-authenticator/">Using jpam as the PAM Authenticator</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-kerberos-security/">Configuring Kerberos Security</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-drill-to-use-spnego-for-http-authentication/">Configuring Drill to use SPNEGO for HTTP Authentication</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-web-ui-and-rest-api-security/">Configuring Web UI and REST API Security</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-custom-acls-to-secure-znodes/">Configuring Custom ACLs to Secure znodes</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Configuring a Multitenant Cluster</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-a-multitenant-cluster-introduction/">Configuring a Multitenant Cluster Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-multitenant-resources/">Configuring Multitenant Resources</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-resources-for-a-shared-drillbit/">Configuring Resources for a Shared Drillbit</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Configuration Options</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuration-options-introduction/">Configuration Options Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/start-up-options/">Start-Up Options</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/planning-and-execution-options/">Planning and Execution Options</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/persistent-configuration-storage/">Persistent Configuration Storage</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/global-query-list/">Global Query List</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/ports-used-by-drill/">Ports Used by Drill</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/configuring-the-drill-shell/">Configuring the Drill Shell</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/configuring-cgroups-to-control-cpu-usage/">Configuring cgroups to Control CPU Usage</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Connect a Data Source</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/connect-a-data-source-introduction/">Connect a Data Source Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/storage-plugin-registration/">Storage Plugin Registration</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Storage Plugin Configuration</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/plugin-configuration-basics/">Plugin Configuration Basics</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-storage-plugins/">Configuring Storage Plugins</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/workspaces/">Workspaces</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drill-default-input-format/">Drill Default Input Format</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/file-system-storage-plugin/">File System Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/hbase-storage-plugin/">HBase Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/hive-storage-plugin/">Hive Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/rdbms-storage-plugin/">RDBMS Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/mongodb-storage-plugin/">MongoDB Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/mapr-db-format/">MapR-DB Format</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/s3-storage-plugin/">S3 Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/opentsdb-storage-plugin/">OpenTSDB Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/kafka-storage-plugin/">Kafka Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/azure-blob-storage-plugin/">Azure Blob Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/druid-storage-plugin/">Druid Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/http-storage-plugin/">HTTP Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/elasticsearch-storage-plugin/">ElasticSearch Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/splunk-storage-plugin/">Splunk Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/cassandra-storage-plugin/">Cassandra Storage Plugin</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">ODBC/JDBC Interfaces</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/interfaces-introduction/">Interfaces Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/using-the-jdbc-driver/">Using the JDBC Driver</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/using-jdbc-with-squirrel-on-windows/">Using JDBC with SQuirreL on Windows</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Installing the ODBC Driver</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-the-driver-on-linux/">Installing the Driver on Linux</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-the-driver-on-mac-os-x/">Installing the Driver on Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/installing-the-driver-on-windows/">Installing the Driver on Windows</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Configuring ODBC</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/odbc-configuration-reference/">ODBC Configuration Reference</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/logging-and-tracing/">Logging and Tracing</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-odbc-on-linux/">Configuring ODBC on Linux</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-odbc-on-mac-os-x/">Configuring ODBC on Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-odbc-on-windows/">Configuring ODBC on Windows</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/testing-the-odbc-connection/">Testing the ODBC Connection</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Using Drill Explorer</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drill-explorer-introduction/">Drill Explorer Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/connecting-drill-explorer-to-data/">Connecting Drill Explorer to Data</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/browsing-data-and-defining-views/">Browsing Data and Defining Views</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Using Drill with BI Tools</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-drill-with-bi-tools-introduction/">Using Drill with BI Tools Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/tableau-examples/">Tableau Examples</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-microstrategy-analytics-with-apache-drill/">Using MicroStrategy Analytics with Apache Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-tibco-spotfire-desktop-with-drill/">Using Tibco Spotfire Desktop with Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-tibco-spotfire-server-with-drill/">Configuring Tibco Spotfire Server with Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-qlik-sense-with-drill/">Using Qlik Sense with Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-apache-drill-with-tableau-10-2/">Using Apache Drill with Tableau 10.2</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-apache-drill-with-tableau-9-desktop/">Using Apache Drill with Tableau 9 Desktop</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-apache-drill-with-tableau-9-server/">Using Apache Drill with Tableau 9 Server</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-information-builders-webfocus-with-apache-drill/">Using Information Builders’ WebFOCUS with Apache Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-jreport-with-drill/">Configuring JReport with Drill</a></li>
              
            </ul>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Query Data</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/query-data-introduction/">Query Data Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Querying a File System</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-a-file-system-introduction/">Querying a File System Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-avro-files/">Querying Avro Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-json-files/">Querying JSON Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-parquet-files/">Querying Parquet Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-plain-text-files/">Querying Plain Text Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-directories/">Querying Directories</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-sequence-files/">Querying Sequence Files</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/querying-hbase/">Querying HBase</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Querying Complex Data</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-complex-data-introduction/">Querying Complex Data Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/sample-data-donuts/">Sample Data: Donuts</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/selecting-flat-data/">Selecting Flat Data</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-sql-functions-clauses-and-joins/">Using SQL Functions, Clauses, and Joins</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/selecting-nested-data-for-a-column/">Selecting Nested Data for a Column</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/selecting-multiple-columns-within-nested-data/">Selecting Multiple Columns Within Nested Data</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/querying-hive/">Querying Hive</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/querying-the-information-schema/">Querying the INFORMATION SCHEMA</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Querying Indexes</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/querying-indexes-introduction/">Querying Indexes Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/queries-that-qualify-for-index-based-query-plans/">Queries that Qualify for Index-Based Query Plans</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/types-of-indexes/">Types of Indexes</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/index-selection/">Index Selection</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/designing-indexes-for-your-queries/">Designing Indexes for Your Queries</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/configuring-index-planning/">Configuring Index Planning</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/verifying-index-use/">Verifying Index Use</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/querying-system-tables/">Querying System Tables</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/monitoring-and-canceling-queries-in-the-drill-web-ui/">Monitoring and Canceling Queries in the Drill Web UI</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1 current_section "><a href="javascript: void(0);">Performance Tuning</a></li>
          <ul class="current_section">
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Drill Metastore</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/using-drill-metastore/">Using Drill Metastore</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drill-iceberg-metastore/">Drill Iceberg Metastore</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/rdbms-metastore/">RDBMS Metastore</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/performance-tuning-introduction/">Performance Tuning Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Partition Pruning</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/partition-pruning-introduction/">Partition Pruning Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/how-to-partition-data/">How to Partition Data</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/asynchronous-parquet-reader/">Asynchronous Parquet Reader</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/optimizing-parquet-metadata-reading/">Optimizing Parquet Metadata Reading</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/parquet-filter-pushdown/">Parquet Filter Pushdown</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/hive-metadata-caching/">Hive Metadata Caching</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/choosing-a-storage-format/">Choosing a Storage Format</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Query Plans and Tuning</a></li>
              <ul style="">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/query-plans-and-tuning-introduction/">Query Plans and Tuning Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/join-planning-guidelines/">Join Planning Guidelines</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/guidelines-for-optimizing-aggregation/">Guidelines for Optimizing Aggregation</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/modifying-query-planning-options/">Modifying Query Planning Options</a></li>
              
                <li class="toctree-l3 current"><a class="reference internal" href="/drill/zh/docs/sort-based-and-hash-based-memory-constrained-operators/">Sort-Based and Hash-Based Memory-Constrained Operators</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/enabling-query-queuing/">Enabling Query Queuing</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/throttling/">Throttling</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/controlling-parallelization-to-balance-performance-with-multi-tenancy/">Controlling Parallelization to Balance Performance with Multi-Tenancy</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Identifying Performance Issues</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/query-plans/">Query Plans</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/query-profiles/">Query Profiles</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Performance Tuning Reference</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/query-profile-column-descriptions/">Query Profile Column Descriptions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/physical-operators/">Physical Operators</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/monitoring-metrics/">Monitoring Metrics</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Log and Debug</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/log-and-debug-introduction/">Log and Debug Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/error-messages/">Error Messages</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/modify-logback-xml/">Modify logback.xml</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/review-the-java-stack-trace/">Review the Java Stack Trace</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/query-audit-logging/">Query Audit Logging</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">SQL Reference</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/sql-reference-introduction/">SQL Reference Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Data Types</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/supported-data-types/">Supported Data Types</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/date-time-and-timestamp/">Date, Time, and Timestamp</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/handling-different-data-types/">Handling Different Data Types</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/lexical-structure/">Lexical Structure</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/operators/">Operators</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Functions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/about-sql-function-examples/">About SQL Function Examples</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/math-and-trig/">Math and Trig</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/data-type-conversion/">Data Type Conversion</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/data-type-functions/">Data Type Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/date-time-functions-and-arithmetic/">Date/Time Functions and Arithmetic</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/string-manipulation/">String Manipulation</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/aggregate-and-aggregate-statistical/">Aggregate and Aggregate Statistical</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/functions-for-handling-nulls/">Functions for Handling Nulls</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/phonetic-functions/">Phonetic Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/string-distance-functions/">String Distance Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/cryptography-functions/">Cryptography Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/sql-dialect-compatibility-functions/">SQL dialect compatibility functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/gis-functions/">GIS functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/time-series-analysis-functions/">Time Series Analysis Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/ip-networking-functions/">IP Networking functions</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Window Functions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/sql-window-functions-introduction/">SQL Window Functions Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/aggregate-window-functions/">Aggregate Window Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/ranking-window-functions/">Ranking Window Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/value-window-functions/">Value Window Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/sql-window-functions-examples/">SQL Window Functions Examples</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Nested Data Functions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/nested-data-limitations/">Nested Data Limitations</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/flatten/">FLATTEN</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/kvgen/">KVGEN</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/repeated-count/">REPEATED_COUNT</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/repeated-contains/">REPEATED_CONTAINS</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/query-directory-functions/">Query Directory Functions</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Commands</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/supported-sql-commands/">Supported SQL Commands</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/analyze-table-refresh-metadata/">ANALYZE TABLE REFRESH METADATA</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/analyze-table-compute-statistics/">ANALYZE TABLE COMPUTE STATISTICS</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/set/">SET</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/refresh-table-metadata/">REFRESH TABLE METADATA</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/reset/">RESET</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/alter-system/">ALTER SYSTEM</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/create-or-replace-schema/">CREATE OR REPLACE SCHEMA</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/create-table-as-ctas/">CREATE TABLE AS (CTAS)</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/create-temporary-table-as-cttas/">CREATE TEMPORARY TABLE AS (CTTAS)</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/create-function-using-jar/">CREATE FUNCTION USING JAR</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/partition-by-clause/">PARTITION BY Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/create-view/">CREATE VIEW</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/describe/">DESCRIBE</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drop-function-using-jar/">DROP FUNCTION USING JAR</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drop-table/">DROP TABLE</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drop-view/">DROP VIEW</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/explain/">EXPLAIN</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/lateral-join/">LATERAL Join</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/select/">SELECT</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/select-list/">SELECT List</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/from-clause/">FROM Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/group-by-clause/">GROUP BY Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/having-clause/">HAVING Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/limit-clause/">LIMIT Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/offset-clause/">OFFSET Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/order-by-clause/">ORDER BY Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/union-set-operator/">UNION Set Operator</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/where-clause/">WHERE Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/with-clause/">WITH Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/show-databases-and-show-schemas/">SHOW DATABASES and SHOW SCHEMAS</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/show-files/">SHOW FILES</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/show-tables/">SHOW TABLES</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/use/">USE</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Conditional Expressions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/case/">CASE</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/reserved-keywords/">Reserved Keywords</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/sql-extensions/">SQL Extensions</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Data Sources and File Formats</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/data-sources-and-file-formats-introduction/">Data Sources and File Formats Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/hive-to-drill-data-type-mapping/">Hive-to-Drill Data Type Mapping</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/deploying-and-using-a-hive-udf/">Deploying and Using a Hive UDF</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/parquet-format/">Parquet Format</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/logfile-plugin/">Logfile Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/json-data-model/">JSON Data Model</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/text-files-csv-tsv-psv/">Text Files: CSV, TSV, PSV</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/sequence-files/">Sequence Files</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/httpd-format-plugin/">HTTPD Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/image-metadata-format-plugin/">Image Metadata Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/syslog-format-plugin/">Syslog Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/ltsv-format-plugin/">LTSV Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/spss-format-plugin/">SPSS Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/esri-shapefile-format-plugin/">ESRI Shapefile Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/excel-format-plugin/">Excel Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/hdf5-format-plugin/">HDF5 Format Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/xml-format-plugin/">XML Format Plugin</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Develop Custom Functions</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/develop-custom-functions-introduction/">Develop Custom Functions Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/developing-a-simple-function/">Developing a Simple Function</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/tutorial-develop-a-simple-function/">Tutorial: Develop a Simple Function</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/developing-an-aggregate-function/">Developing an Aggregate Function</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Adding Custom Functions to Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/adding-custom-functions-to-drill-introduction/">Adding Custom Functions to Drill Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/manually-adding-custom-functions-to-drill/">Manually Adding Custom Functions to Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/creating-custom-authenticators/">Creating Custom Authenticators</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/dynamic-udfs/">Dynamic UDFs</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/using-custom-functions-in-queries/">Using Custom Functions in Queries</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/custom-function-interfaces/">Custom Function Interfaces</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a class="reference internal" href="/drill/zh/docs/troubleshooting/">Troubleshooting</a></li>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Developer Information</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">REST API</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/rest-api-introduction/">REST API Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/submitting-queries-from-the-rest-api-when-impersonation-is-enabled-and-authentication-is-disabled/">Submitting Queries from the REST API when Impersonation is Enabled and Authentication is Disabled</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/use-postman-to-run-sql-queries-on-drill-data-sources/">Use Postman to Run SQL Queries on Drill Data Sources</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Develop Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/compiling-drill-from-source/">Compiling Drill from Source</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/useful-information-for-drill-developers/">Useful Information for Drill Developers</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Contribute to Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/apache-drill-contribution-guidelines/">Apache Drill Contribution Guidelines</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/apache-drill-contribution-ideas/">Apache Drill Contribution Ideas</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Design Docs</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/drill-plan-syntax/">Drill Plan Syntax</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/rpc-overview/">RPC Overview</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/query-stages/">Query Stages</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/useful-research/">Useful Research</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/zh/docs/value-vectors/">Value Vectors</a></li>
              
            </ul>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Release Notes</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-19-0-release-notes/">Apache Drill 1.19.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-18-0-release-notes/">Apache Drill 1.18.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-17-0-release-notes/">Apache Drill 1.17.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-16-0-release-notes/">Apache Drill 1.16.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-15-0-release-notes/">Apache Drill 1.15.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-14-0-release-notes/">Apache Drill 1.14.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-13-0-release-notes/">Apache Drill 1.13.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-12-0-release-notes/">Apache Drill 1.12.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-11-0-release-notes/">Apache Drill 1.11.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-10-0-release-notes/">Apache Drill 1.10.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-9-0-release-notes/">Apache Drill 1.9.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-8-0-release-notes/">Apache Drill 1.8.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-7-0-release-notes/">Apache Drill 1.7.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-6-0-release-notes/">Apache Drill 1.6.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-5-0-release-notes/">Apache Drill 1.5.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-4-0-release-notes/">Apache Drill 1.4.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-3-0-release-notes/">Apache Drill 1.3.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-2-0-release-notes/">Apache Drill 1.2.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-1-0-release-notes/">Apache Drill 1.1.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-1-0-0-release-notes/">Apache Drill 1.0.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-0-9-0-release-notes/">Apache Drill 0.9.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-0-8-0-release-notes/">Apache Drill 0.8.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-0-7-0-release-notes/">Apache Drill 0.7.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-0-6-0-release-notes/">Apache Drill 0.6.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-0-5-0-release-notes/">Apache Drill 0.5.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-0-4-0-release-notes/">Apache Drill 0.4.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/apache-drill-m1-release-notes-apache-drill-alpha/">Apache Drill M1 Release Notes (Apache Drill Alpha)</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Sample Datasets</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/enron-emails/">Enron Emails</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/wikipedia-edit-history/">Wikipedia Edit History</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a class="reference internal" href="/drill/zh/docs/project-bylaws/">Project Bylaws</a></li>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Ecosystem</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/zh/docs/using-saiku-analytics-with-apache-drill/">Using Saiku Analytics with Apache Drill</a></li>
            
          
          </ul>
        
      
      </ul>

    </div>
  </div>
</aside>


<nav class="breadcrumbs">
  <li><a href="/drill/zh/docs/">Docs</a></li>
 
  
    <li><a href="/drill/zh/docs/performance-tuning/">Performance Tuning</a></li>
  
    <li><a href="/drill/zh/docs/query-plans-and-tuning/">Query Plans and Tuning</a></li>
  
  <li>Sort-Based and Hash-Based Memory-Constrained Operators</li>
</nav>


<div class="main-content-wrapper">
  <div class="main-content">

    
      <a class="edit-link" href="https://github.com/apache/drill/blob/gh-pages/_docs/en/performance-tuning/query-plans-and-tuning/050-sort-based-and-hash-based-memory-constrained-operators.md" target="_blank"><i class="fa fa-pencil-square-o"></i></a>
    

    <div class="int_title left">
      <h1>Sort-Based and Hash-Based Memory-Constrained Operators</h1>

    </div>

    <!-- jt: we don't need to display a last-modified date on each page to users
    
    --> 

    <div class="int_text" align="left">
      
        <p>Drill supports the following memory-intensive operators, which can temporarily spill data to disk if they run out of memory:</p>

<ul>
  <li>External Sort</li>
  <li>Hash-Join (includes semi-join functionality starting in Drill 1.15)</li>
  <li>Hash-Aggregate</li>
</ul>

<p>Drill only uses the External Sort operator to sort data. Drill uses the Hash-Aggregate operator to aggregate data. Alternatively, Drill can sort the data and then use the (lightweight) Streaming-Aggregate operator to aggregate data.
Drill uses the Hash-Join operator to join data. Drill 1.15 introduces semi-join functionality inside the Hash-Join operator to improve query performance. Semi-joins remove the distinct processing below the Hash-Join and eliminate the overhead incurred from using a Hash Aggregate. Prior to Drill 1.15 (or when <a href="/drill/zh/docs/sort-based-and-hash-based-memory-constrained-operators/#disabling-the-hash-operators">semi-join functionality is disabled</a>), Drill used a Distinct Hash Aggregate to implement the functionality of a semi-join. Alternatively, Drill can use the Nested-Loop-Join or sort the data and then use the (lightweight) Merge-Join. Drill typically uses Hash operators for joining and aggregation, as they perform better than the Sort operator (Hash - O(N) vs. Sort - O(N * log(N))). However, if you disable the Hash operators, or the data is already sorted, Drill uses the alternative methods previously described.</p>

<p>The memory configuration in Drill is specified as the memory limit per-query, per-node. The allocated memory is equally divided among all instances of the spillable operators (per query on each node). The number of instances is the number of spillable operators in the query plan multiplied by the maximal degree of parallelism. The maximal degree of parallelism is the number of minor fragments required to perform the work for each instance of a spillable operator. When an instance of a spillable operator must process more data than it can hold, the operator temporarily spills some of the data to a directory on disk to complete its work.</p>

<h2 id="spill-to-disk">Spill to Disk</h2>

<p>Spilling to disk prevents queries that use memory intensive operations from failing with out-of-memory errors. The Spill to Disk feature enables the spillable operators to automatically spill (write) excess data (as files) to a temporary directory on disk when the memory requirements for the operators exceed the set memory limit. Queries run uninterrupted while the operators perform the spill operations in the background.</p>

<p>When the spillable operators finish processing data in memory, they read the spilled data back from disk and then finish processing the data. The operators clean up their data (files) from the temporary spill location after they finish processing the data.</p>

<p>Ideally, you want to allocate enough memory for Drill to perform all operations in memory. When data spills to disk, you will not see any difference in terms of how queries run; however, spilling to disk can impact performance due to the additional I/O required to write data to disk and read the data back. For more information, see <a href="/drill/zh/docs/sort-based-and-hash-based-memory-constrained-operators/#memory-allocation">Memory Allocation</a>.</p>

<p><strong>Note:</strong> Drill 1.14 and later supports spilling to disk for the Hash Join, Hash Aggregate, and Sort operators. Drill 1.11, 1.12, and 1.13 supports spilling to disk for the Hash Aggregate and Sort operators. Releases of Drill prior to 1.11 only support spilling to disk for the Sort operator.</p>

<p><strong>Spill Locations</strong></p>

<p>Spillable operators write data to a temporary work area on disk when they cannot process all of the data in memory. The default location of the temporary work area is <code class="language-plaintext highlighter-rouge">/tmp/drill/spill</code> on the local file system.</p>

<p>The <code class="language-plaintext highlighter-rouge">/tmp/drill/spill</code> directory should suffice for small workloads or examples; however, you should redirect the default spill location to a location with enough disk space to support spilling for large workloads.</p>

<p><strong>Note:</strong> Spilled data may require more space than the table referenced in the query that is spilling the data. For example, when the underlying table is compressed (Parquet), or when the operator received data joined from multiple tables.</p>

<p>When you configure the spill location, you can specify a single directory or a list of directories into which the spillable operators spill data.</p>

<p><strong>Configuring Spill to Disk</strong></p>

<p>The <code class="language-plaintext highlighter-rouge">drill-override.conf</code> file, located in the <code class="language-plaintext highlighter-rouge">/conf</code> directory, contains options that set the spill locations for the spillable operators. An administrator can change the file system and directories into which the operators spill data. Refer to the <code class="language-plaintext highlighter-rouge">drill-override-example.conf</code> file included in the <code class="language-plaintext highlighter-rouge">/conf</code> directory for examples.</p>

<p>The following list describes the spill to disk configuration options:</p>

<ul>
  <li>
    <p><strong>drill.exec.spill.fs</strong><br />
Introduced in Drill 1.11. The default file system on the local machine into which the spillable operators spill data. You can configure this option so that data spills into a distributed file system, such as hdfs. For example, “hdfs:///”. The default setting is “file:///”.</p>
  </li>
  <li>
    <p><strong>drill.exec.spill.directories</strong><br />
Introduced in Drill 1.11. The list of directories into which the spillable operators spill data. The list must be an array with directories separated by a comma, for example [“/fs1/drill/spill” , “/fs2/drill/spill” , “/fs3/drill/spill”]. The default setting is [“/tmp/drill/spill”].</p>
  </li>
</ul>

<p><strong>Note:</strong> The following options were available prior to Drill 1.11, but have since been deprecated and replaced with the options described above:</p>

<ul>
  <li>Drill.exec.sort.external.spill.fs (Replaced by drill.exec.spill.fs)</li>
  <li>Drill.exec.sort.external.spill.directories (Replaced by drill.exec.spill.directories)</li>
  <li>Drill.exec.hashagg.spill.fs (Replaced by drill.exec.spill.fs)</li>
</ul>

<h2 id="memory-allocation">Memory Allocation</h2>

<p>Drill evenly splits the available memory among all instances of the spillable operators. When a query is parallelized, the number of operators is multiplied, which reduces the amount of memory given to each instance of the operators during a query. To see the difference in memory consumption between the operators, you can run a query and then view the query profile in the Drill Web UI. Optionally, you can disable the Hash operators, which forces Drill to use the Merge-Join and Streaming-Aggregate operators.</p>

<p><strong>Memory Allocation Configuration Options</strong></p>

<p>The <code class="language-plaintext highlighter-rouge">planner.memory.max_query_memory_per_node</code> and <code class="language-plaintext highlighter-rouge">planner.memory.percent_per_query</code> options set the amount of memory that Drill can allocate to a query on a node. Both options are enabled by default. Of these two options, Drill picks the setting that provides the most memory.</p>

<ul>
  <li>
    <p><strong>planner.memory.max_query_memory_per_node</strong><br />
The <code class="language-plaintext highlighter-rouge">planner.memory.max_query_memory_per_node</code> option is the minimum amount of memory available to Drill per query on a node. The default of 2 GB typically allows between two and three concurrent queries to run when the JVM is configured to use 8 GB of direct memory (default). When the memory requirement for Drill increases, the default of 2 GB is constraining. You must increase the amount of memory for queries to complete, unless the setting for the <code class="language-plaintext highlighter-rouge">planner.memory.percent_per_query</code> option allows for Drill to use more memory.</p>
  </li>
  <li>
    <p><strong>planner.memory.percent_per_query</strong><br />
Alternatively, the <code class="language-plaintext highlighter-rouge">planner.memory.percent_per_query</code> option sets the memory as a percentage of the total direct memory. The default is 5%. This value is only used when throttling is disabled. Setting the value to 0 disables the option. You can increase or decrease the value; however, you should set the percentage well below the JVM direct memory to account for the cases where Drill does not manage memory, such as for the less memory intensive operators.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> - The percentage is calculated using the following formula:    

        (1 - non-managed allowance)/concurrency  

 - The non-managed allowance is an assumed amount of system memory that non-managed operators will use. Non-managed operators do not spill to disk. The conservative assumption for the non-managed allowance is 50% of the total system memory. Concurrency is the number of concurrent queries that may run. The default assumption is 10 concurrent queries.  

 - Based on the default assumptions, the default value of 5% is calculated, as shown:  

      (1 - .50)/10 = 0.05  
</code></pre></div>    </div>
  </li>
</ul>

<p><strong>Increasing the Available Memory</strong></p>

<table>
  <tbody>
    <tr>
      <td>You can increase the amount of available memory to Drill using the ALTER SYSTEM</td>
      <td>SESSION SET commands with the <code class="language-plaintext highlighter-rouge">planner.memory.max_query_memory_per_node</code> or <code class="language-plaintext highlighter-rouge">planner.memory.percent_per_query</code> options, as shown:</td>
    </tr>
  </tbody>
</table>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   ALTER SYSTEM|SESSION SET `planner.memory.max_query_memory_per_node` = &lt;new_value&gt;
   //The default value is to 2147483648 bytes (2GB). 
   
   ALTER SYSTEM|SESSION SET `planner.memory.percent_per_query` = &lt;new_value&gt;
   //The default value is 0.05.  
</code></pre></div></div>

<h2 id="disabling-the-hash-operators">Disabling the Hash Operators</h2>

<p>You can disable the Hash Aggregate and Hash Join operators. When you disable these operators, Drill creates alternative query plans that use the Sort operator and the Streaming Aggregate or the Merge Join operator.</p>

<table>
  <tbody>
    <tr>
      <td>Use the ALTER SYSTEM</td>
      <td>SESSION SET commands with the following options to disable the Hash Aggregate and Hash Join operators. Typically, you set the options at the session level unless you want the setting to persist across all sessions.</td>
    </tr>
  </tbody>
</table>

<p>The following options control the hash-based operators:</p>

<ul>
  <li>
    <p><strong>planner.enable_hashagg</strong><br />
Enables or disables hash aggregation; otherwise, Drill does a sort-based aggregation. This option is enabled by default. The default, and recommended, setting is true. Prior to Drill 1.11, the Hash Aggregate operator used an uncontrolled amount of memory (up to 10 GB), after which the operator ran out of memory. As of Drill 1.11, the Hash Aggregate operator can spill to disk.</p>
  </li>
  <li>
    <p><strong>planner.enable_hashjoin</strong><br />
Enables or disables hash joins. This option is enabled by default. Drill assumes that a query will have adequate memory to complete and tries to use the fastest operations possible. Prior to Drill 1.14, the Hash-Join operator used an uncontrolled amount of memory (up to 10 GB), after which the operator ran out of memory. As of Drill 1.14, this operator can spill to disk. This option is enabled by default.</p>
  </li>
  <li>
    <p><strong>planner.enable_semijoin</strong><br />
Enables or disables semi-join functionality inside the Hash Join. This option is enabled by default. When enabled, a semi-join flag inside the HashJoin flag is set to true, and Drill uses a semi-join to remove the distinct processing below the Hash Join. When disabled, Drill can still perform semi-joins, but the semi-joins are performed outside of the Hash Join, as shown in the following example:</p>
  </li>
</ul>

<h3 id="example-query-plan-with-and-without-semi-join">Example: Query Plan with and without Semi-Join</h3>

<p><strong>Semi-Join Disabled</strong> <br />
In the following query plan, you can see the HashAgg before the HashJoin. In the HashJoin flag, you can see that semi-join flag is set to false, indicating that a semi-join was not used.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EXPLAIN PLAN FOR SELECT employee_id, full_name FROM cp.`employee.json` WHERE employee_id IN (SELECT employee_id FROM cp.`employee.json`);  

|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
|                                       text                                       |                                                            
|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| 00-00    Screen
00-01      Project(employee_id=[$0], full_name=[$1])
00-02        Project(employee_id=[$0], full_name=[$1])
00-03          HashJoin(condition=[=($0, $2)], joinType=[inner], semi-join: =[false])
00-05            Scan(table=[[cp, employee.json]], groupscan=[EasyGroupScan [selectionRoot=classpath:/employee.json, numFiles=1, columns=[`employee_id`, `full_name`], files=[classpath:/employee.json]]])
00-04            Project(employee_id0=[$0])
00-06              HashAgg(group=[{0}])
00-07                Scan(table=[[cp, employee.json]], groupscan=[EasyGroupScan [selectionRoot=classpath:/employee.json, numFiles=1, columns=[`employee_id`], files=[classpath:/employee.json]]])
planner.enable_semijoin  
</code></pre></div></div>

<p><strong>Semi-Join Enabled</strong> <br />
In the following query plan, you can see that the HashAgg is absent. In the HashJoin flag, you can see that semi-join flag is set to true, indicating that a semi-join was used. Using the semi-join optimizes the query by reducing the amount of processing that Drill must perform on data.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>EXPLAIN PLAN FOR SELECT employee_id, full_name FROM cp.`employee.json` WHERE employee_id IN (SELECT employee_id FROM cp.`employee.json`);  

|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
|                                       text                                       |                                                            
|----------------------------------------------------------------------------------|----------------------------------------------------------------------------------|
| 00-00    Screen
00-01      Project(employee_id=[$0], full_name=[$1])
00-02        HashJoin(condition=[=($0, $2)], joinType=[inner], semi-join: =[true])
00-04          Scan(table=[[cp, employee.json]], groupscan=[EasyGroupScan [selectionRoot=classpath:/employee.json, numFiles=1, columns=[`employee_id`, `full_name`], files=[classpath:/employee.json]]])
00-03          Scan(table=[[cp, employee.json]], groupscan=[EasyGroupScan [selectionRoot=classpath:/employee.json, numFiles=1, columns=[`employee_id`], files=[classpath:/employee.json]]])
</code></pre></div></div>


    
      
        <div class="doc-nav">
  
  <span class="previous-toc"><a href="/drill/zh/docs/modifying-query-planning-options/">← Modifying Query Planning Options</a></span><span class="next-toc"><a href="/drill/zh/docs/enabling-query-queuing/">Enabling Query Queuing →</a></span>
</div>

    
    </div>
  </div>
</div>

  </div>
  <p class="push"></p>
<div id="footer" class="mw">
<div class="wrapper">
Copyright © 2012-2020 The Apache Software Foundation, licensed under the Apache License, Version 2.0.<br>
Apache and the Apache feather logo are trademarks of The Apache Software Foundation. Other names appearing on the site may be trademarks of their respective owners.<br/><br/>
</div>
</div>

  <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53379651-1', 'auto');
ga('send', 'pageview');
</script>
<script type="text/javascript" src="https://s7.addthis.com/js/300/addthis_widget.js#pubid=ra-548b2caa33765e8d" async="async"></script>

</body>
</html>
