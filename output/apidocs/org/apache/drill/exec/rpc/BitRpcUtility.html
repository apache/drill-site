<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>BitRpcUtility (Drill : 1.21.2-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.drill.exec.rpc, class: BitRpcUtility">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/BitRpcUtility.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.drill.exec.rpc</a></div>
<h1 title="Class BitRpcUtility" class="title">Class BitRpcUtility</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.drill.exec.rpc.BitRpcUtility</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">BitRpcUtility</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Utility class providing common methods shared between <a href="data/DataClient.html" title="class in org.apache.drill.exec.rpc.data"><code>DataClient</code></a> and
 <a href="control/ControlClient.html" title="class in org.apache.drill.exec.rpc.control"><code>ControlClient</code></a></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isLocalControlServer(org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint,org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint)" class="member-name-link">isLocalControlServer</a><wbr>(<a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto">CoordinationProtos.DrillbitEndpoint</a>&nbsp;local,
 <a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto">CoordinationProtos.DrillbitEndpoint</a>&nbsp;remote)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Verifies if local and remote Drillbit Endpoint has same control server by using address and control port
 information.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static &lt;T extends com.google.protobuf.Internal.EnumLite,<wbr>
CC extends <a href="ClientConnection.html" title="interface in org.apache.drill.exec.rpc">ClientConnection</a>,<wbr>
HS extends com.google.protobuf.MessageLite,<wbr>
HR extends com.google.protobuf.MessageLite&gt;<br>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#prepareSaslHandshake(org.apache.drill.exec.rpc.RpcConnectionHandler,java.util.List,CC,org.apache.drill.exec.rpc.BitConnectionConfig,org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint,org.apache.drill.exec.rpc.BasicClient,T)" class="member-name-link">prepareSaslHandshake</a><wbr>(<a href="RpcConnectionHandler.html" title="interface in org.apache.drill.exec.rpc">RpcConnectionHandler</a>&lt;CC&gt;&nbsp;connectionHandler,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;serverAuthMechanisms,
 CC&nbsp;connection,
 <a href="BitConnectionConfig.html" title="class in org.apache.drill.exec.rpc">BitConnectionConfig</a>&nbsp;config,
 <a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto">CoordinationProtos.DrillbitEndpoint</a>&nbsp;endpoint,
 <a href="BasicClient.html" title="class in org.apache.drill.exec.rpc">BasicClient</a>&lt;T,<wbr>CC,<wbr>HS,<wbr>HR&gt;&nbsp;client,
 T&nbsp;saslRpcType)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Creates various instances needed to start the SASL handshake.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#validateHandshake(int,java.util.List,int,org.apache.drill.exec.rpc.ClientConnection,org.apache.drill.exec.rpc.BitConnectionConfig,org.apache.drill.exec.rpc.BasicClient)" class="member-name-link">validateHandshake</a><wbr>(int&nbsp;handshakeRpcVersion,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;remoteAuthMechs,
 int&nbsp;rpcVersion,
 <a href="ClientConnection.html" title="interface in org.apache.drill.exec.rpc">ClientConnection</a>&nbsp;connection,
 <a href="BitConnectionConfig.html" title="class in org.apache.drill.exec.rpc">BitConnectionConfig</a>&nbsp;config,
 <a href="BasicClient.html" title="class in org.apache.drill.exec.rpc">BasicClient</a>&nbsp;client)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Method to do validation on the handshake message received from server side.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="validateHandshake(int,java.util.List,int,org.apache.drill.exec.rpc.ClientConnection,org.apache.drill.exec.rpc.BitConnectionConfig,org.apache.drill.exec.rpc.BasicClient)">
<h3>validateHandshake</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">validateHandshake</span><wbr><span class="parameters">(int&nbsp;handshakeRpcVersion,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;remoteAuthMechs,
 int&nbsp;rpcVersion,
 <a href="ClientConnection.html" title="interface in org.apache.drill.exec.rpc">ClientConnection</a>&nbsp;connection,
 <a href="BitConnectionConfig.html" title="class in org.apache.drill.exec.rpc">BitConnectionConfig</a>&nbsp;config,
 <a href="BasicClient.html" title="class in org.apache.drill.exec.rpc">BasicClient</a>&nbsp;client)</span>
                                      throws <span class="exceptions"><a href="RpcException.html" title="class in org.apache.drill.exec.rpc">RpcException</a></span></div>
<div class="block">Method to do validation on the handshake message received from server side. Only used by BitClients NOT UserClient.
 Verify if rpc version of handshake message matches the supported RpcVersion and also validates the
 security configuration between client and server</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>handshakeRpcVersion</code> - - rpc version received in handshake message</dd>
<dd><code>remoteAuthMechs</code> - - authentication mechanisms supported by server</dd>
<dd><code>rpcVersion</code> - - supported rpc version on client</dd>
<dd><code>connection</code> - - client connection</dd>
<dd><code>config</code> - - client connectin config</dd>
<dd><code>client</code> - - data client or control client</dd>
<dt>Returns:</dt>
<dd>- Immutable list of authentication mechanisms supported by server or null</dd>
<dt>Throws:</dt>
<dd><code><a href="RpcException.html" title="class in org.apache.drill.exec.rpc">RpcException</a></code> - - exception is thrown if rpc version or authentication configuration mismatch is found</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="prepareSaslHandshake(org.apache.drill.exec.rpc.RpcConnectionHandler,java.util.List,CC,org.apache.drill.exec.rpc.BitConnectionConfig,org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint,org.apache.drill.exec.rpc.BasicClient,T)">
<h3 id="prepareSaslHandshake(org.apache.drill.exec.rpc.RpcConnectionHandler,java.util.List,org.apache.drill.exec.rpc.ClientConnection,org.apache.drill.exec.rpc.BitConnectionConfig,org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint,org.apache.drill.exec.rpc.BasicClient,com.google.protobuf.Internal.EnumLite)">prepareSaslHandshake</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="type-parameters-long">&lt;T extends com.google.protobuf.Internal.EnumLite,<wbr>
CC extends <a href="ClientConnection.html" title="interface in org.apache.drill.exec.rpc">ClientConnection</a>,<wbr>
HS extends com.google.protobuf.MessageLite,<wbr>
HR extends com.google.protobuf.MessageLite&gt;</span>
<span class="return-type">void</span>&nbsp;<span class="element-name">prepareSaslHandshake</span><wbr><span class="parameters">(<a href="RpcConnectionHandler.html" title="interface in org.apache.drill.exec.rpc">RpcConnectionHandler</a>&lt;CC&gt;&nbsp;connectionHandler,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;serverAuthMechanisms,
 CC&nbsp;connection,
 <a href="BitConnectionConfig.html" title="class in org.apache.drill.exec.rpc">BitConnectionConfig</a>&nbsp;config,
 <a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto">CoordinationProtos.DrillbitEndpoint</a>&nbsp;endpoint,
 <a href="BasicClient.html" title="class in org.apache.drill.exec.rpc">BasicClient</a>&lt;T,<wbr>CC,<wbr>HS,<wbr>HR&gt;&nbsp;client,
 T&nbsp;saslRpcType)</span></div>
<div class="block">Creates various instances needed to start the SASL handshake. This is called from
 <a href="BasicClient.html#prepareSaslHandshake(org.apache.drill.exec.rpc.RpcConnectionHandler,java.util.List)"><code>BasicClient.prepareSaslHandshake(RpcConnectionHandler, List)</code></a> only for
 <a href="data/DataClient.html" title="class in org.apache.drill.exec.rpc.data"><code>DataClient</code></a> and <a href="control/ControlClient.html" title="class in org.apache.drill.exec.rpc.control"><code>ControlClient</code></a></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>connectionHandler</code> - - Connection handler used by client's to know about success/failure conditions.</dd>
<dd><code>serverAuthMechanisms</code> - - List of auth mechanisms configured on server side</dd>
<dd><code>connection</code> - - ClientConnection used for authentication</dd>
<dd><code>config</code> - - ClientConnection config</dd>
<dd><code>endpoint</code> - - Remote DrillbitEndpoint</dd>
<dd><code>client</code> - - Either of DataClient/ControlClient instance</dd>
<dd><code>saslRpcType</code> - - SASL_MESSAGE RpcType for Data and Control channel</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isLocalControlServer(org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint,org.apache.drill.exec.proto.CoordinationProtos.DrillbitEndpoint)">
<h3>isLocalControlServer</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isLocalControlServer</span><wbr><span class="parameters">(<a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto">CoordinationProtos.DrillbitEndpoint</a>&nbsp;local,
 <a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto">CoordinationProtos.DrillbitEndpoint</a>&nbsp;remote)</span></div>
<div class="block">Verifies if local and remote Drillbit Endpoint has same control server by using address and control port
 information. This method is used instead of equals in <a href="../proto/CoordinationProtos.DrillbitEndpoint.html" title="class in org.apache.drill.exec.proto"><code>CoordinationProtos.DrillbitEndpoint</code></a> because DrillbitEndpoint stores
 state information in it.
 For local Drillbit a reference is stored in <a href="../server/DrillbitContext.html" title="class in org.apache.drill.exec.server"><code>DrillbitContext</code></a> as soon as
 Drillbit is started in <a href="../service/ServiceEngine.html#start()"><code>ServiceEngine.start()</code></a> with state as STARTUP, but
 while planning minor fragment the assignment list is used from active list of Drillbits in which state for local
 Drillbit will not be STARTUP</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>local</code> - - DrillbitEndpoint instance for local bit</dd>
<dd><code>remote</code> - - DrillbitEndpoint instance for remote bit</dd>
<dt>Returns:</dt>
<dd>true if address and control port for local and remote are same.
         false - otherwise</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
