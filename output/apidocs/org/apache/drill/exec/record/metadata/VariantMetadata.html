<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>VariantMetadata (Drill : 1.21.2-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.drill.exec.record.metadata, interface: VariantMetadata">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/VariantMetadata.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.drill.exec.record.metadata</a></div>
<h1 title="Interface VariantMetadata" class="title">Interface VariantMetadata</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="VariantSchema.html" title="class in org.apache.drill.exec.record.metadata">VariantSchema</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">VariantMetadata</span></div>
<div class="block">Describes the contents of a list or union field. Such fields are,
 in effect, a map from minor type to vector, represented here as
 a map from minor type to column metadata. The child columns used here
 are a useful fiction. The column name is made up to be the same as
 the name of the type.
 <p>
 In Drill, a union and a list are related, but distinct. In metadata,
 a union is an optional variant while a list is a variant array.
 This makes the representation simpler
 and should be a good-enough approximation of reality.
 <p>
 Variants can contain three kinds of children:
 <ul>
 <li>Nullable (optional) scalar vectors.</li>
 <li>Non-nullable (required) map.</li>
 <li>Nullable (optional) list.</li>
 </ul>
 <p>
 A union cannot contain a repeated vector. Instead, the
 union can contain a list. Note also that maps can never be optional,
 so they are required in the union, even though the map is, in effect,
 optional (the map is effectively null if it is not used for a give
 row.) Yes, this is confusing, but it is how the vectors are
 implemented (for now.)
 <p>
 A list type is modeled here as a repeated union type. This is not
 entirely accurate, but it is another useful fiction. (In actual
 implementation, a list is either a single type, or a array of
 unions. This detail is abstracted away here.)
 <p>
 In vector implementation, unions declare their member types, but
 lists don't. Here, both types declare their member types. (Another
 useful fiction.)
 <p>
 A union or list can contain a map. Maps have structure. To support this,
 the metadata allows adding a map column that contains the map structure.
 Such metadata exist only in this system; it is not easily accessible in
 the vector implementation.
 <p>
 A union or list can contain a list (though not a union.) As described
 here, lists can have structure, and so, like maps, can be built using
 a column that provides that structure.
 <p>
 Note that the Drill <a href="../../../common/types/TypeProtos.MinorType.html#UNION"><code>UNION</code></a> and
 <a href="../../../common/types/TypeProtos.MinorType.html#LIST"><code>LIST</code></a> implementations are considered experimental
 and are not generally enabled. As a result, this metadata schema must
 also be considered experimental and subject to change.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#addType(org.apache.drill.common.types.TypeProtos.MinorType)" class="member-name-link">addType</a><wbr>(<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&nbsp;type)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Add any supported type to the variant.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#addType(org.apache.drill.exec.record.metadata.ColumnMetadata)" class="member-name-link">addType</a><wbr>(<a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a>&nbsp;col)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Add a column for any supported type to the variant.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#becomeSimple()" class="member-name-link">becomeSimple</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#hasType(org.apache.drill.common.types.TypeProtos.MinorType)" class="member-name-link">hasType</a><wbr>(<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&nbsp;type)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Determine if the given type is a member of the variant.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isSimple()" class="member-name-link">isSimple</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isSingleType()" class="member-name-link">isSingleType</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">A list is defined as a list of variants at the metadata layer.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#listSubtype()" class="member-name-link">listSubtype</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Lists are odd creatures: they contain a union if they have more
 than one subtype, but are like a nullable repeated type if they
 contain only one type.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#member(org.apache.drill.common.types.TypeProtos.MinorType)" class="member-name-link">member</a><wbr>(<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&nbsp;type)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Retrieve the virtual column for a given type.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#members()" class="member-name-link">members</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#parent()" class="member-name-link">parent</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Return the column that defines this variant structure</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the number of types in the variant.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#types()" class="member-name-link">types</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns the list of types which are members of this variant.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="addType(org.apache.drill.common.types.TypeProtos.MinorType)">
<h3>addType</h3>
<div class="member-signature"><span class="return-type"><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></span>&nbsp;<span class="element-name">addType</span><wbr><span class="parameters">(<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&nbsp;type)</span></div>
<div class="block">Add any supported type to the variant.
 <p>
 At present, the union
 vector does not support the decimal types. This class does not
 reject such types; but they will cause a runtime exception when
 code asks the union vector for these types.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>type</code> - type to add</dd>
<dt>Returns:</dt>
<dd>the "virtual" column for that type</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the type has already been
 added</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addType(org.apache.drill.exec.record.metadata.ColumnMetadata)">
<h3>addType</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">addType</span><wbr><span class="parameters">(<a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a>&nbsp;col)</span></div>
<div class="block">Add a column for any supported type to the variant.
 Use this to add structure to a list or map member.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>col</code> - column to add. The column must have the correct
 mode. The column's type is used as the type key</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html" title="class or interface in java.lang" class="external-link">IllegalArgumentException</a></code> - if the type has already been
 added, or if the mode is wrong</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">size</span>()</div>
<div class="block">Returns the number of types in the variant.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the number of types in the variant</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="hasType(org.apache.drill.common.types.TypeProtos.MinorType)">
<h3>hasType</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">hasType</span><wbr><span class="parameters">(<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&nbsp;type)</span></div>
<div class="block">Determine if the given type is a member of the variant.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>type</code> - type to check</dd>
<dt>Returns:</dt>
<dd><tt>true</tt> if the type is a member,
 <tt>false</tt> if not</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="types()">
<h3>types</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&gt;</span>&nbsp;<span class="element-name">types</span>()</div>
<div class="block">Returns the list of types which are members of this variant.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the list of types</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="members()">
<h3>members</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html" title="class or interface in java.util" class="external-link">Collection</a>&lt;<a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a>&gt;</span>&nbsp;<span class="element-name">members</span>()</div>
</section>
</li>
<li>
<section class="detail" id="member(org.apache.drill.common.types.TypeProtos.MinorType)">
<h3>member</h3>
<div class="member-signature"><span class="return-type"><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></span>&nbsp;<span class="element-name">member</span><wbr><span class="parameters">(<a href="../../../common/types/TypeProtos.MinorType.html" title="enum in org.apache.drill.common.types">TypeProtos.MinorType</a>&nbsp;type)</span></div>
<div class="block">Retrieve the virtual column for a given type.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>type</code> - the type key</dd>
<dt>Returns:</dt>
<dd>the virtual column, or <tt>null</tt> if the type
 is not a member of the variant</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="parent()">
<h3>parent</h3>
<div class="member-signature"><span class="return-type"><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></span>&nbsp;<span class="element-name">parent</span>()</div>
<div class="block">Return the column that defines this variant structure</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the column that returns this variant structure
 from its <a href="ColumnMetadata.html#variantSchema()"><code>variantSchema()</code></a>
 method</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isSingleType()">
<h3>isSingleType</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isSingleType</span>()</div>
<div class="block">A list is defined as a list of variants at the metadata layer.
 But, in implementation, a list will do special processing if the
 variant (union) contains only one type.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><tt>true</tt> if this variant contains only one type,
 </tt>false</tt> if the variant contains 0, 2 or more types</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="listSubtype()">
<h3>listSubtype</h3>
<div class="member-signature"><span class="return-type"><a href="ColumnMetadata.html" title="interface in org.apache.drill.exec.record.metadata">ColumnMetadata</a></span>&nbsp;<span class="element-name">listSubtype</span>()</div>
<div class="block">Lists are odd creatures: they contain a union if they have more
 than one subtype, but are like a nullable repeated type if they
 contain only one type. This method returns the type of the array:
 either the single type (if <a href="#isSingleType()"><code>isSingleType()</code></a> is <tt>true</tt>)
 or a reference to the synthetic union column nested inside the
 list.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the metadata for the implicit column within the list</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="becomeSimple()">
<h3>becomeSimple</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">becomeSimple</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isSimple()">
<h3>isSimple</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isSimple</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
