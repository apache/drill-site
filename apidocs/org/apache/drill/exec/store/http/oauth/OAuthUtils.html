<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>OAuthUtils (Drill : 1.21.2-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.drill.exec.store.http.oauth, class: OAuthUtils">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/OAuthUtils.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.drill.exec.store.http.oauth</a></div>
<h1 title="Class OAuthUtils" class="title">Class OAuthUtils</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.drill.exec.store.http.oauth.OAuthUtils</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">OAuthUtils</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">OAuthUtils</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#buildAccessTokenURL(org.apache.drill.common.logical.security.CredentialsProvider)" class="member-name-link">buildAccessTokenURL</a><wbr>(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Helper method for building the access token URL.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static okhttp3.Request</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getAccessTokenRequest(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String,java.lang.String)" class="member-name-link">getAccessTokenRequest</a><wbr>(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;authenticationCode,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;callbackURL)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Crafts a POST request to obtain an access token.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static okhttp3.Request</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getAccessTokenRequestFromRefreshToken(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String)" class="member-name-link">getAccessTokenRequestFromRefreshToken</a><wbr>(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;refreshToken)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Crafts a POST request to obtain an access token.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getOAuthTokens(okhttp3.OkHttpClient,okhttp3.Request)" class="member-name-link">getOAuthTokens</a><wbr>(okhttp3.OkHttpClient&nbsp;client,
 okhttp3.Request&nbsp;request)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">This function is called in after the user has obtained an OAuth Authorization Code.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static okhttp3.RequestBody</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getPostRequest(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String,java.lang.String)" class="member-name-link">getPostRequest</a><wbr>(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;authorizationCode,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;callbackURL)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Crafts a POST request to obtain an access token.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static okhttp3.RequestBody</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getPostRequestForTokenRefresh(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String)" class="member-name-link">getPostRequestForTokenRefresh</a><wbr>(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;refreshToken)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Crafts a POST request for refreshing an access token when a refresh token is present.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#clone--" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#equals-java.lang.Object-" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#finalize--" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#getClass--" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#hashCode--" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notify--" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#notifyAll--" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#toString--" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait--" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html#wait-long-int-" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>OAuthUtils</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">OAuthUtils</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getPostRequest(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String,java.lang.String)">
<h3>getPostRequest</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">okhttp3.RequestBody</span>&nbsp;<span class="element-name">getPostRequest</span><wbr><span class="parameters">(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;authorizationCode,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;callbackURL)</span></div>
<div class="block">Crafts a POST request to obtain an access token.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>credentialsProvider</code> - A credential provider containing the clientID, clientSecret and authorizationCode</dd>
<dd><code>authorizationCode</code> - The authorization code from the OAuth2.0 enabled API</dd>
<dd><code>callbackURL</code> - The callback URL. For our purposes this is obtained from the incoming Drill request as it all goes to the same place.</dd>
<dt>Returns:</dt>
<dd>A Request Body to obtain an access token</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPostRequestForTokenRefresh(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String)">
<h3>getPostRequestForTokenRefresh</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">okhttp3.RequestBody</span>&nbsp;<span class="element-name">getPostRequestForTokenRefresh</span><wbr><span class="parameters">(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;refreshToken)</span></div>
<div class="block">Crafts a POST request for refreshing an access token when a refresh token is present.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>credentialsProvider</code> - A credential provider containing the clientID, clientSecret and refreshToken</dd>
<dd><code>refreshToken</code> - The refresh token</dd>
<dt>Returns:</dt>
<dd>A Request Body with the correct parameters for obtaining an access token</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="buildAccessTokenURL(org.apache.drill.common.logical.security.CredentialsProvider)">
<h3>buildAccessTokenURL</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">buildAccessTokenURL</span><wbr><span class="parameters">(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider)</span></div>
<div class="block">Helper method for building the access token URL.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>credentialsProvider</code> - The credentialsProvider containing all the OAuth pieces.</dd>
<dt>Returns:</dt>
<dd>The URL string for obtaining an Auth Code.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAccessTokenRequest(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String,java.lang.String)">
<h3>getAccessTokenRequest</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">okhttp3.Request</span>&nbsp;<span class="element-name">getAccessTokenRequest</span><wbr><span class="parameters">(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;authenticationCode,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;callbackURL)</span></div>
<div class="block">Crafts a POST request to obtain an access token.  This method should be used for the initial call
 to the OAuth API when you are exchanging the authorization code for an access token.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>credentialsProvider</code> - The credentialsProvider containing the client_id, client_secret, and auth_code.</dd>
<dd><code>authenticationCode</code> - The authentication code from the API.</dd>
<dt>Returns:</dt>
<dd>A request to obtain the access token.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAccessTokenRequestFromRefreshToken(org.apache.drill.common.logical.security.CredentialsProvider,java.lang.String)">
<h3>getAccessTokenRequestFromRefreshToken</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">okhttp3.Request</span>&nbsp;<span class="element-name">getAccessTokenRequestFromRefreshToken</span><wbr><span class="parameters">(<a href="../../../../common/logical/security/CredentialsProvider.html" title="interface in org.apache.drill.common.logical.security">CredentialsProvider</a>&nbsp;credentialsProvider,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;refreshToken)</span></div>
<div class="block">Crafts a POST request to obtain an access token.  This method should be used for the additional calls
 to the OAuth API when you are refreshing the access token. The refresh token must be populated for this
 to be successful.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>credentialsProvider</code> - The credential provider containing the client_id, client_secret, and refresh token.</dd>
<dd><code>refreshToken</code> - The OAuth2.0 refresh token</dd>
<dt>Returns:</dt>
<dd>A request to obtain the access token.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getOAuthTokens(okhttp3.OkHttpClient,okhttp3.Request)">
<h3>getOAuthTokens</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html" title="class or interface in java.util" class="external-link">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;</span>&nbsp;<span class="element-name">getOAuthTokens</span><wbr><span class="parameters">(okhttp3.OkHttpClient&nbsp;client,
 okhttp3.Request&nbsp;request)</span></div>
<div class="block">This function is called in after the user has obtained an OAuth Authorization Code.
 It returns a map of any tokens returned which should be an access_token and an optional
 refresh_token.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>client</code> - The OkHTTP3 client.</dd>
<dd><code>request</code> - The finalized Request to obtain the tokens.  This request should be a POST request
                containing a client_id, client_secret, authorization code, and grant type.</dd>
<dt>Returns:</dt>
<dd>a Map of any tokens returned.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
