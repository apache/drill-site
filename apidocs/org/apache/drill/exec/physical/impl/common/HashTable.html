<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>HashTable (Drill : 1.21.2-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.apache.drill.exec.physical.impl.common, interface: HashTable">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/HashTable.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">org.apache.drill.exec.physical.impl.common</a></div>
<h1 title="Interface HashTable" class="title">Interface HashTable</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="HashTableTemplate.html" title="class in org.apache.drill.exec.physical.impl.common">HashTableTemplate</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">HashTable</span></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Interface</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static enum&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="HashTable.PutStatus.html" class="type-name-link" title="enum in org.apache.drill.exec.physical.impl.common">HashTable.PutStatus</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final int</code></div>
<div class="col-second even-row-color"><code><a href="#BATCH_MASK" class="member-name-link">BATCH_MASK</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#BATCH_SIZE" class="member-name-link">BATCH_SIZE</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The batch size used for internal batch holders</div>
</div>
<div class="col-first even-row-color"><code>static final float</code></div>
<div class="col-second even-row-color"><code><a href="#DEFAULT_LOAD_FACTOR" class="member-name-link">DEFAULT_LOAD_FACTOR</a></code></div>
<div class="col-last even-row-color">
<div class="block">The default load factor of a hash table.</div>
</div>
<div class="col-first odd-row-color"><code>static final int</code></div>
<div class="col-second odd-row-color"><code><a href="#MAXIMUM_CAPACITY" class="member-name-link">MAXIMUM_CAPACITY</a></code></div>
<div class="col-last odd-row-color">
<div class="block">The maximum capacity of the hash table (in terms of number of buckets).</div>
</div>
<div class="col-first even-row-color"><code>static final <a href="../../../compile/TemplateClassDefinition.html" title="class in org.apache.drill.exec.compile">TemplateClassDefinition</a>&lt;<a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common">HashTable</a>&gt;</code></div>
<div class="col-second even-row-color"><code><a href="#TEMPLATE_DEFINITION" class="member-name-link">TEMPLATE_DEFINITION</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#clear()" class="member-name-link">clear</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Frees all the direct memory consumed by the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#decreaseRecordNumForKey(int)" class="member-name-link">decreaseRecordNumForKey</a><wbr>(int&nbsp;currentIndex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Decrease the count of records for a specific key by one.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>long</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getActualSize()" class="member-name-link">getActualSize</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The amount of direct memory consumed by the hash table.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getBuildHashCode(int)" class="member-name-link">getBuildHashCode</a><wbr>(int&nbsp;incomingRowIdx)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Computes the hash code for the record at the given index in the build side batch.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getProbeHashCode(int)" class="member-name-link">getProbeHashCode</a><wbr>(int&nbsp;incomingRowIdx)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Computes the hash code for the record at the given index in the probe side batch.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getRecordNumForKey(int)" class="member-name-link">getRecordNumForKey</a><wbr>(int&nbsp;currentIndex)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getStats(org.apache.drill.exec.physical.impl.common.HashTableStats)" class="member-name-link">getStats</a><wbr>(<a href="HashTableStats.html" title="class in org.apache.drill.exec.physical.impl.common">HashTableStats</a>&nbsp;stats)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#getTargetBatchRowCount()" class="member-name-link">getTargetBatchRowCount</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#isEmpty()" class="member-name-link">isEmpty</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#makeDebugString()" class="member-name-link">makeDebugString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Returns a message containing memory usage statistics.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>org.apache.commons.lang3.tuple.Pair&lt;<a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#nextBatch()" class="member-name-link">nextBatch</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#outputKeys(int,org.apache.drill.exec.record.VectorContainer,int)" class="member-name-link">outputKeys</a><wbr>(int&nbsp;batchIdx,
 <a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;outContainer,
 int&nbsp;numRecords)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Retrieves the key columns and transfers them to the output container.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#probeForKey(int,int)" class="member-name-link">probeForKey</a><wbr>(int&nbsp;incomingRowIdx,
 int&nbsp;hashCode)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="HashTable.PutStatus.html" title="enum in org.apache.drill.exec.physical.impl.common">HashTable.PutStatus</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#put(int,org.apache.drill.exec.physical.impl.common.IndexPointer,int,int)" class="member-name-link">put</a><wbr>(int&nbsp;incomingRowIdx,
 <a href="IndexPointer.html" title="class in org.apache.drill.exec.physical.impl.common">IndexPointer</a>&nbsp;htIdxHolder,
 int&nbsp;hashCode,
 int&nbsp;batchSize)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#reset()" class="member-name-link">reset</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Clears all the memory used by the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a> and re-initializes it.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setRecordNumForKey(int,int)" class="member-name-link">setRecordNumForKey</a><wbr>(int&nbsp;currentIndex,
 int&nbsp;num)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Set the count of records for a specific key to num.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setTargetBatchRowCount(int)" class="member-name-link">setTargetBatchRowCount</a><wbr>(int&nbsp;batchRowCount)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#setup(org.apache.drill.exec.physical.impl.common.HashTableConfig,org.apache.drill.exec.memory.BufferAllocator,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.ops.FragmentContext,org.apache.drill.exec.expr.ClassGenerator)" class="member-name-link">setup</a><wbr>(<a href="HashTableConfig.html" title="class in org.apache.drill.exec.physical.impl.common">HashTableConfig</a>&nbsp;htConfig,
 <a href="../../../memory/BufferAllocator.html" title="interface in org.apache.drill.exec.memory">BufferAllocator</a>&nbsp;allocator,
 <a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;incomingBuild,
 <a href="../../../record/RecordBatch.html" title="interface in org.apache.drill.exec.record">RecordBatch</a>&nbsp;incomingProbe,
 <a href="../../../record/RecordBatch.html" title="interface in org.apache.drill.exec.record">RecordBatch</a>&nbsp;outgoing,
 <a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;htContainerOrig,
 <a href="../../../ops/FragmentContext.html" title="interface in org.apache.drill.exec.ops">FragmentContext</a>&nbsp;context,
 <a href="../../../expr/ClassGenerator.html" title="class in org.apache.drill.exec.expr">ClassGenerator</a>&lt;?&gt;&nbsp;cg)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block"><a href="#setup(org.apache.drill.exec.physical.impl.common.HashTableConfig,org.apache.drill.exec.memory.BufferAllocator,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.ops.FragmentContext,org.apache.drill.exec.expr.ClassGenerator)"><code>setup(org.apache.drill.exec.physical.impl.common.HashTableConfig, org.apache.drill.exec.memory.BufferAllocator, org.apache.drill.exec.record.VectorContainer, org.apache.drill.exec.record.RecordBatch, org.apache.drill.exec.record.RecordBatch, org.apache.drill.exec.record.VectorContainer, org.apache.drill.exec.ops.FragmentContext, org.apache.drill.exec.expr.ClassGenerator&lt;?&gt;)</code></a> must be called before anything can be done to the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#size()" class="member-name-link">size</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updateBatches()" class="member-name-link">updateBatches</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Updates the incoming (build and probe side) value vectors references in the <a href="HashTableTemplate.BatchHolder.html" title="class in org.apache.drill.exec.physical.impl.common"><code>HashTableTemplate.BatchHolder</code></a>s.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updateIncoming(org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.record.RecordBatch)" class="member-name-link">updateIncoming</a><wbr>(<a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;newIncoming,
 <a href="../../../record/RecordBatch.html" title="interface in org.apache.drill.exec.record">RecordBatch</a>&nbsp;newIncomingProbe)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Changes the incoming probe and build side batches, and then updates all the value vector references in the <a href="HashTableTemplate.BatchHolder.html" title="class in org.apache.drill.exec.physical.impl.common"><code>HashTableTemplate.BatchHolder</code></a>s.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#updateInitialCapacity(int)" class="member-name-link">updateInitialCapacity</a><wbr>(int&nbsp;initialCapacity)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Update the initial capacity for the hash table.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="TEMPLATE_DEFINITION">
<h3>TEMPLATE_DEFINITION</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type"><a href="../../../compile/TemplateClassDefinition.html" title="class in org.apache.drill.exec.compile">TemplateClassDefinition</a>&lt;<a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common">HashTable</a>&gt;</span>&nbsp;<span class="element-name">TEMPLATE_DEFINITION</span></div>
</section>
</li>
<li>
<section class="detail" id="MAXIMUM_CAPACITY">
<h3>MAXIMUM_CAPACITY</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">MAXIMUM_CAPACITY</span></div>
<div class="block">The maximum capacity of the hash table (in terms of number of buckets).</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../../../constant-values.html#org.apache.drill.exec.physical.impl.common.HashTable.MAXIMUM_CAPACITY">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="DEFAULT_LOAD_FACTOR">
<h3>DEFAULT_LOAD_FACTOR</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">float</span>&nbsp;<span class="element-name">DEFAULT_LOAD_FACTOR</span></div>
<div class="block">The default load factor of a hash table.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../../../constant-values.html#org.apache.drill.exec.physical.impl.common.HashTable.DEFAULT_LOAD_FACTOR">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="BATCH_SIZE">
<h3>BATCH_SIZE</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">BATCH_SIZE</span></div>
<div class="block">The batch size used for internal batch holders</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../../../constant-values.html#org.apache.drill.exec.physical.impl.common.HashTable.BATCH_SIZE">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="BATCH_MASK">
<h3>BATCH_MASK</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">BATCH_MASK</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../../../constant-values.html#org.apache.drill.exec.physical.impl.common.HashTable.BATCH_MASK">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setup(org.apache.drill.exec.physical.impl.common.HashTableConfig,org.apache.drill.exec.memory.BufferAllocator,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.ops.FragmentContext,org.apache.drill.exec.expr.ClassGenerator)">
<h3>setup</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setup</span><wbr><span class="parameters">(<a href="HashTableConfig.html" title="class in org.apache.drill.exec.physical.impl.common">HashTableConfig</a>&nbsp;htConfig,
 <a href="../../../memory/BufferAllocator.html" title="interface in org.apache.drill.exec.memory">BufferAllocator</a>&nbsp;allocator,
 <a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;incomingBuild,
 <a href="../../../record/RecordBatch.html" title="interface in org.apache.drill.exec.record">RecordBatch</a>&nbsp;incomingProbe,
 <a href="../../../record/RecordBatch.html" title="interface in org.apache.drill.exec.record">RecordBatch</a>&nbsp;outgoing,
 <a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;htContainerOrig,
 <a href="../../../ops/FragmentContext.html" title="interface in org.apache.drill.exec.ops">FragmentContext</a>&nbsp;context,
 <a href="../../../expr/ClassGenerator.html" title="class in org.apache.drill.exec.expr">ClassGenerator</a>&lt;?&gt;&nbsp;cg)</span></div>
<div class="block"><a href="#setup(org.apache.drill.exec.physical.impl.common.HashTableConfig,org.apache.drill.exec.memory.BufferAllocator,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.RecordBatch,org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.ops.FragmentContext,org.apache.drill.exec.expr.ClassGenerator)"><code>setup(org.apache.drill.exec.physical.impl.common.HashTableConfig, org.apache.drill.exec.memory.BufferAllocator, org.apache.drill.exec.record.VectorContainer, org.apache.drill.exec.record.RecordBatch, org.apache.drill.exec.record.RecordBatch, org.apache.drill.exec.record.VectorContainer, org.apache.drill.exec.ops.FragmentContext, org.apache.drill.exec.expr.ClassGenerator&lt;?&gt;)</code></a> must be called before anything can be done to the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>htConfig</code> - </dd>
<dd><code>allocator</code> - </dd>
<dd><code>incomingBuild</code> - </dd>
<dd><code>incomingProbe</code> - </dd>
<dd><code>outgoing</code> - </dd>
<dd><code>htContainerOrig</code> - </dd>
<dd><code>context</code> - </dd>
<dd><code>cg</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateBatches()">
<h3>updateBatches</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">updateBatches</span>()
            throws <span class="exceptions"><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></span></div>
<div class="block">Updates the incoming (build and probe side) value vectors references in the <a href="HashTableTemplate.BatchHolder.html" title="class in org.apache.drill.exec.physical.impl.common"><code>HashTableTemplate.BatchHolder</code></a>s.
 This is useful on OK_NEW_SCHEMA (need to verify).</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBuildHashCode(int)">
<h3>getBuildHashCode</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getBuildHashCode</span><wbr><span class="parameters">(int&nbsp;incomingRowIdx)</span>
              throws <span class="exceptions"><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></span></div>
<div class="block">Computes the hash code for the record at the given index in the build side batch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>incomingRowIdx</code> - The index of the build side record of interest.</dd>
<dt>Returns:</dt>
<dd>The hash code for the record at the given index in the build side batch.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getProbeHashCode(int)">
<h3>getProbeHashCode</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getProbeHashCode</span><wbr><span class="parameters">(int&nbsp;incomingRowIdx)</span>
              throws <span class="exceptions"><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></span></div>
<div class="block">Computes the hash code for the record at the given index in the probe side batch.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>incomingRowIdx</code> - The index of the probe side record of interest.</dd>
<dt>Returns:</dt>
<dd>The hash code for the record at the given index in the probe side batch.</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="put(int,org.apache.drill.exec.physical.impl.common.IndexPointer,int,int)">
<h3>put</h3>
<div class="member-signature"><span class="return-type"><a href="HashTable.PutStatus.html" title="enum in org.apache.drill.exec.physical.impl.common">HashTable.PutStatus</a></span>&nbsp;<span class="element-name">put</span><wbr><span class="parameters">(int&nbsp;incomingRowIdx,
 <a href="IndexPointer.html" title="class in org.apache.drill.exec.physical.impl.common">IndexPointer</a>&nbsp;htIdxHolder,
 int&nbsp;hashCode,
 int&nbsp;batchSize)</span>
                 throws <span class="exceptions"><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a>,
<a href="../../../../common/exceptions/RetryAfterSpillException.html" title="class in org.apache.drill.common.exceptions">RetryAfterSpillException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></code></dd>
<dd><code><a href="../../../../common/exceptions/RetryAfterSpillException.html" title="class in org.apache.drill.common.exceptions">RetryAfterSpillException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="probeForKey(int,int)">
<h3>probeForKey</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">probeForKey</span><wbr><span class="parameters">(int&nbsp;incomingRowIdx,
 int&nbsp;hashCode)</span>
         throws <span class="exceptions"><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>incomingRowIdx</code> - The index of the key in the probe batch.</dd>
<dd><code>hashCode</code> - The hashCode of the key.</dd>
<dt>Returns:</dt>
<dd>Returns -1 if the data in the probe batch at the given incomingRowIdx is not in the hash table. Otherwise returns
 the composite index of the key in the hash table (index of BatchHolder and record in Batch Holder).</dd>
<dt>Throws:</dt>
<dd><code><a href="../../../exception/SchemaChangeException.html" title="class in org.apache.drill.exec.exception">SchemaChangeException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRecordNumForKey(int)">
<h3>getRecordNumForKey</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getRecordNumForKey</span><wbr><span class="parameters">(int&nbsp;currentIndex)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentIndex</code> - The composite index of the key in the hash table (index of BatchHolder and record in Batch Holder).</dd>
<dt>Returns:</dt>
<dd>Returns -1 if the count of records for a specific key is not computed. Otherwise returns
 the count of records for a specific key.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRecordNumForKey(int,int)">
<h3>setRecordNumForKey</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setRecordNumForKey</span><wbr><span class="parameters">(int&nbsp;currentIndex,
 int&nbsp;num)</span></div>
<div class="block">Set the count of records for a specific key to num.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentIndex</code> - The composite index of the key in the hash table (index of BatchHolder and record in Batch Holder).</dd>
<dd><code>num</code> - The count of records for a specific key to be set.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="decreaseRecordNumForKey(int)">
<h3>decreaseRecordNumForKey</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">decreaseRecordNumForKey</span><wbr><span class="parameters">(int&nbsp;currentIndex)</span></div>
<div class="block">Decrease the count of records for a specific key by one.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>currentIndex</code> - The composite index of the key in the hash table (index of BatchHolder and record in Batch Holder).</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStats(org.apache.drill.exec.physical.impl.common.HashTableStats)">
<h3>getStats</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">getStats</span><wbr><span class="parameters">(<a href="HashTableStats.html" title="class in org.apache.drill.exec.physical.impl.common">HashTableStats</a>&nbsp;stats)</span></div>
</section>
</li>
<li>
<section class="detail" id="size()">
<h3>size</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">size</span>()</div>
</section>
</li>
<li>
<section class="detail" id="isEmpty()">
<h3>isEmpty</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">isEmpty</span>()</div>
</section>
</li>
<li>
<section class="detail" id="clear()">
<h3>clear</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">clear</span>()</div>
<div class="block">Frees all the direct memory consumed by the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="updateInitialCapacity(int)">
<h3>updateInitialCapacity</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">updateInitialCapacity</span><wbr><span class="parameters">(int&nbsp;initialCapacity)</span></div>
<div class="block">Update the initial capacity for the hash table. This method will be removed after the key vectors are removed from the hash table. It is used
 to allocate <a href="HashTableTemplate.BatchHolder.html" title="class in org.apache.drill.exec.physical.impl.common"><code>HashTableTemplate.BatchHolder</code></a>s of appropriate size when the final size of the HashTable is known.

 <b>Warning!</b> Only call this method before you have inserted elements into the HashTable.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>initialCapacity</code> - The new initial capacity to use.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateIncoming(org.apache.drill.exec.record.VectorContainer,org.apache.drill.exec.record.RecordBatch)">
<h3>updateIncoming</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">updateIncoming</span><wbr><span class="parameters">(<a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;newIncoming,
 <a href="../../../record/RecordBatch.html" title="interface in org.apache.drill.exec.record">RecordBatch</a>&nbsp;newIncomingProbe)</span></div>
<div class="block">Changes the incoming probe and build side batches, and then updates all the value vector references in the <a href="HashTableTemplate.BatchHolder.html" title="class in org.apache.drill.exec.physical.impl.common"><code>HashTableTemplate.BatchHolder</code></a>s.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>newIncoming</code> - The new build side batch.</dd>
<dd><code>newIncomingProbe</code> - The new probe side batch.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="reset()">
<h3>reset</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">reset</span>()</div>
<div class="block">Clears all the memory used by the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a> and re-initializes it.</div>
</section>
</li>
<li>
<section class="detail" id="outputKeys(int,org.apache.drill.exec.record.VectorContainer,int)">
<h3>outputKeys</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="element-name">outputKeys</span><wbr><span class="parameters">(int&nbsp;batchIdx,
 <a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>&nbsp;outContainer,
 int&nbsp;numRecords)</span></div>
<div class="block">Retrieves the key columns and transfers them to the output container. Note this operation removes the key columns from the <a href="HashTable.html" title="interface in org.apache.drill.exec.physical.impl.common"><code>HashTable</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>batchIdx</code> - The index of a <a href="HashTableTemplate.BatchHolder.html" title="class in org.apache.drill.exec.physical.impl.common"><code>HashTableTemplate.BatchHolder</code></a> in the HashTable.</dd>
<dd><code>outContainer</code> - The destination container for the key columns.</dd>
<dd><code>numRecords</code> - The number of key recorts to transfer.</dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="makeDebugString()">
<h3>makeDebugString</h3>
<div class="member-signature"><span class="return-type"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">makeDebugString</span>()</div>
<div class="block">Returns a message containing memory usage statistics. Intended to be used for printing debugging or error messages.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>A debug string.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getActualSize()">
<h3>getActualSize</h3>
<div class="member-signature"><span class="return-type">long</span>&nbsp;<span class="element-name">getActualSize</span>()</div>
<div class="block">The amount of direct memory consumed by the hash table.</div>
<dl class="notes">
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="setTargetBatchRowCount(int)">
<h3>setTargetBatchRowCount</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="element-name">setTargetBatchRowCount</span><wbr><span class="parameters">(int&nbsp;batchRowCount)</span></div>
</section>
</li>
<li>
<section class="detail" id="getTargetBatchRowCount()">
<h3>getTargetBatchRowCount</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">getTargetBatchRowCount</span>()</div>
</section>
</li>
<li>
<section class="detail" id="nextBatch()">
<h3>nextBatch</h3>
<div class="member-signature"><span class="return-type">org.apache.commons.lang3.tuple.Pair&lt;<a href="../../../record/VectorContainer.html" title="class in org.apache.drill.exec.record">VectorContainer</a>,<wbr><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html" title="class or interface in java.lang" class="external-link">Integer</a>&gt;</span>&nbsp;<span class="element-name">nextBatch</span>()</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
