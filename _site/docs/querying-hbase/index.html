<!DOCTYPE html>
<html>

<head>

<meta charset="UTF-8">
<meta name=viewport content="width=device-width, initial-scale=1">
<meta name="robots" content="noindex">

<title>Querying HBase - Apache Drill</title>

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<link href='//fonts.googleapis.com/css?family=PT+Sans' rel='stylesheet' type='text/css'/>
<link href="/drill/css/site.css" rel="stylesheet" type="text/css"/>

<link rel="shortcut icon" href="/drill/favicon.ico" type="image/x-icon"/>
<link rel="icon" href="/drill/favicon.ico" type="image/x-icon"/>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" language="javascript" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js" language="javascript" type="text/javascript"></script>
<script language="javascript" type="text/javascript" src="/drill/js/modernizr.custom.js"></script>
<script language="javascript" type="text/javascript" src="/drill/js/script.js"></script>
<script language="javascript" type="text/javascript" src="/drill/js/drill.js"></script>

</head>


<body onResize="resized();">
  <div class="page-wrap">
    <div class="bui"></div>

<div id="menu" class="mw">
<ul>
  <li class='toc-categories'>
  <a class="expand-toc-icon" href="javascript:void(0);"><i class="fa fa-bars"></i></a>
  </li>
  <li class="logo"><a href="/drill/"></a></li>
  <li class='expand-menu'>
  <a href="javascript:void(0);"><span class='menu-text'>Menu</span><span class='expand-icon'><i class="fa fa-bars"></i></span></a>
  </li>
  <li class='clear-float'></li>
  <li class="documentation-menu">
    <a href="/drill/docs/">Documentation</a>
    <ul>
      
        <li><a href="/drill/docs/getting-started/">Getting Started</a></li>
      
        <li><a href="/drill/docs/architecture/">Architecture</a></li>
      
        <li><a href="/drill/docs/tutorials/">Tutorials</a></li>
      
        <li><a href="/drill/docs/install-drill/">Install Drill</a></li>
      
        <li><a href="/drill/docs/configure-drill/">Configure Drill</a></li>
      
        <li><a href="/drill/docs/connect-a-data-source/">Connect a Data Source</a></li>
      
        <li><a href="/drill/docs/odbc-jdbc-interfaces/">ODBC/JDBC Interfaces</a></li>
      
        <li><a href="/drill/docs/query-data/">Query Data</a></li>
      
        <li><a href="/drill/docs/performance-tuning/">Performance Tuning</a></li>
      
        <li><a href="/drill/docs/log-and-debug/">Log and Debug</a></li>
      
        <li><a href="/drill/docs/sql-reference/">SQL Reference</a></li>
      
        <li><a href="/drill/docs/data-sources-and-file-formats/">Data Sources and File Formats</a></li>
      
        <li><a href="/drill/docs/develop-custom-functions/">Develop Custom Functions</a></li>
      
        <li><a href="/drill/docs/troubleshooting/">Troubleshooting</a></li>
      
        <li><a href="/drill/docs/developer-information/">Developer Information</a></li>
      
        <li><a href="/drill/docs/release-notes/">Release Notes</a></li>
      
        <li><a href="/drill/docs/sample-datasets/">Sample Datasets</a></li>
      
        <li><a href="/drill/docs/project-bylaws/">Project Bylaws</a></li>
      
    </ul>
  </li>
  <li class='nav'>
    <a href="/drill/community-resources/">Community</a>
    <ul>
      <li><a href="/drill/team/">Team</a></li>
      <li><a href="/drill/mailinglists/">Mailing Lists</a></li>
      <li><a href="/drill/community-resources/">Community Resources</a></li>
    </ul>
  </li>
  <li class='nav'><a href="/drill/faq/">FAQ</a></li>
  <li class='nav'><a href="/drill/blog/">Blog</a></li>
  <li id="twitter-menu-item"><a href="https://twitter.com/apachedrill" title="apachedrill on twitter" target="_blank"><img src="/drill/images/twitter_32_26_white.png" alt="twitter logo" align="center"></a> </li>
  <li class='search-bar'>
    <form id="drill-search-form">
      <input type="text" placeholder="Search Apache Drill" id="drill-search-term" />
      <button type="submit">
        <i class="fa fa-search"></i>
      </button>
    </form>
  </li>
  <li class="d">
    <a href="/drill/download/">
      <i class="fa fa-cloud-download"></i> Download
    </a>
  </li>
</ul>
</div>

    <link href="/drill/css/content.css" rel="stylesheet" type="text/css">


      




<aside class="sidebar">
  <div class="docsidebar">
    <div class="docsidebarwrapper">
      <ul style="display: block;">
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Getting Started</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/drill-introduction/">Drill Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/why-drill/">Why Drill</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Architecture</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/architecture-introduction/">Architecture Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/drill-query-execution/">Drill Query Execution</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/core-modules/">Core Modules</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/performance/">Performance</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Tutorials</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/tutorials-introduction/">Tutorials Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/drill-in-10-minutes/">Drill in 10 Minutes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/analyzing-the-yelp-academic-dataset/">Analyzing the Yelp Academic Dataset</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Learn Drill with the MapR Sandbox</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/about-the-mapr-sandbox/">About the MapR Sandbox</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-the-apache-drill-sandbox/">Installing the Apache Drill Sandbox</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/getting-to-know-the-drill-sandbox/">Getting to Know the Drill Sandbox</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/lesson-1-learn-about-the-data-set/">Lesson 1: Learn about the Data Set</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/lesson-2-run-queries-with-ansi-sql/">Lesson 2: Run Queries with ANSI SQL</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/lesson-3-run-queries-on-complex-data-types/">Lesson 3: Run Queries on Complex Data Types</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/summary/">Summary</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/analyzing-highly-dynamic-datasets/">Analyzing Highly Dynamic Datasets</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/analyzing-social-media/">Analyzing Social Media</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/analyzing-data-using-window-functions/">Analyzing Data Using Window Functions</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Install Drill</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/install-drill-introduction/">Install Drill Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Installing Drill in Embedded Mode</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/embedded-mode-prerequisites/">Embedded Mode Prerequisites</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-drill-on-linux-and-mac-os-x/">Installing Drill on Linux and Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/starting-drill-on-linux-and-mac-os-x/">Starting Drill on Linux and Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-drill-on-windows/">Installing Drill on Windows</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/starting-drill-on-windows/">Starting Drill on Windows</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Installing Drill in Distributed Mode</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/distributed-mode-prerequisites/">Distributed Mode Prerequisites</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-drill-on-the-cluster/">Installing Drill on the Cluster</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/starting-drill-in-distributed-mode/">Starting Drill in Distributed Mode</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/starting-the-web-console/">Starting the Web Console</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Configure Drill</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configure-drill-introduction/">Configure Drill Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configuring-drill-memory/">Configuring Drill Memory</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Configuring a Multitenant Cluster</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-a-multitenant-cluster-introduction/">Configuring a Multitenant Cluster Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-multitenant-resources/">Configuring Multitenant Resources</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-resources-for-a-shared-drillbit/">Configuring Resources for a Shared Drillbit</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configuring-user-impersonation/">Configuring User Impersonation</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configuring-user-authentication/">Configuring User Authentication</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configuring-user-impersonation-with-hive-authorization/">Configuring User Impersonation with Hive Authorization</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configuring-web-console-and-rest-api-security/">Configuring Web Console and REST API Security</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Configuration Options</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuration-options-introduction/">Configuration Options Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/start-up-options/">Start-Up Options</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/planning-and-execution-options/">Planning and Execution Options</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/persistent-configuration-storage/">Persistent Configuration Storage</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/ports-used-by-drill/">Ports Used by Drill</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/configuring-the-drill-shell/">Configuring the Drill Shell</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Connect a Data Source</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/connect-a-data-source-introduction/">Connect a Data Source Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/storage-plugin-registration/">Storage Plugin Registration</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Storage Plugin Configuration</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/plugin-configuration-basics/">Plugin Configuration Basics</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/workspaces/">Workspaces</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/drill-default-input-format/">Drill Default Input Format</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/file-system-storage-plugin/">File System Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/hbase-storage-plugin/">HBase Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/hive-storage-plugin/">Hive Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/rdbms-storage-plugin/">RDBMS Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/mongodb-storage-plugin/">MongoDB Storage Plugin</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/mapr-db-format/">MapR-DB Format</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/s3-storage-plugin/">S3 Storage Plugin</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">ODBC/JDBC Interfaces</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/interfaces-introduction/">Interfaces Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/using-the-jdbc-driver/">Using the JDBC Driver</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/using-jdbc-with-squirrel-on-windows/">Using JDBC with SQuirreL on Windows</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Installing the ODBC Driver</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-the-driver-on-linux/">Installing the Driver on Linux</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-the-driver-on-mac-os-x/">Installing the Driver on Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-the-driver-on-windows/">Installing the Driver on Windows</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/installing-the-tdc-file-on-windows/">Installing the TDC File on Windows</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Configuring ODBC</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/odbc-configuration-reference/">ODBC Configuration Reference</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-odbc-on-linux/">Configuring ODBC on Linux</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-odbc-on-mac-os-x/">Configuring ODBC on Mac OS X</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-odbc-on-windows/">Configuring ODBC on Windows</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/testing-the-odbc-connection/">Testing the ODBC Connection</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Using Drill Explorer</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/drill-explorer-introduction/">Drill Explorer Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/connecting-drill-explorer-to-data/">Connecting Drill Explorer to Data</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/browsing-data-and-defining-views/">Browsing Data and Defining Views</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Using Drill with BI Tools</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-drill-with-bi-tools-introduction/">Using Drill with BI Tools Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/tableau-examples/">Tableau Examples</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-microstrategy-analytics-with-apache-drill/">Using MicroStrategy Analytics with Apache Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-tibco-spotfire-desktop-with-drill/">Using Tibco Spotfire Desktop with Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-tibco-spotfire-server-with-drill/">Configuring Tibco Spotfire Server with Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-qlik-sense-with-drill/">Using Qlik Sense with Drill</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-apache-drill-with-tableau-9-desktop/">Using Apache Drill with Tableau 9 Desktop</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-apache-drill-with-tableau-9-server/">Using Apache Drill with Tableau 9 Server</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/configuring-jreport-with-drill/">Configuring JReport with Drill</a></li>
              
            </ul>
            
          
          </ul>
        
      
        
          <li class="toctree-l1 current_section "><a href="javascript: void(0);">Query Data</a></li>
          <ul class="current_section">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/query-data-introduction/">Query Data Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Querying a File System</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-a-file-system-introduction/">Querying a File System Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-json-files/">Querying JSON Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-parquet-files/">Querying Parquet Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-plain-text-files/">Querying Plain Text Files</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-directories/">Querying Directories</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-sequence-files/">Querying Sequence Files</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2 current"><a class="reference internal" href="/drill/docs/querying-hbase/">Querying HBase</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Querying Complex Data</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/querying-complex-data-introduction/">Querying Complex Data Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/sample-data-donuts/">Sample Data: Donuts</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/selecting-flat-data/">Selecting Flat Data</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/using-sql-functions-clauses-and-joins/">Using SQL Functions, Clauses, and Joins</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/selecting-nested-data-for-a-column/">Selecting Nested Data for a Column</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/selecting-multiple-columns-within-nested-data/">Selecting Multiple Columns Within Nested Data</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/querying-hive/">Querying Hive</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/querying-the-information-schema/">Querying the INFORMATION SCHEMA</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/querying-system-tables/">Querying System Tables</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/monitoring-and-canceling-queries-in-the-drill-web-console/">Monitoring and Canceling Queries in the Drill Web Console</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Performance Tuning</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/performance-tuning-introduction/">Performance Tuning Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/partition-pruning/">Partition Pruning</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/optimizing-parquet-metadata-reading/">Optimizing Parquet Metadata Reading</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/choosing-a-storage-format/">Choosing a Storage Format</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Query Plans and Tuning</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/query-plans-and-tuning-introduction/">Query Plans and Tuning Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/join-planning-guidelines/">Join Planning Guidelines</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/guidelines-for-optimizing-aggregation/">Guidelines for Optimizing Aggregation</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/modifying-query-planning-options/">Modifying Query Planning Options</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/sort-based-and-hash-based-memory-constrained-operators/">Sort-Based and Hash-Based Memory-Constrained Operators</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/enabling-query-queuing/">Enabling Query Queuing</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/controlling-parallelization-to-balance-performance-with-multi-tenancy/">Controlling Parallelization to Balance Performance with Multi-Tenancy</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Identifying Performance Issues</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/query-plans/">Query Plans</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/query-profiles/">Query Profiles</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Performance Tuning Reference</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/query-profile-column-descriptions/">Query Profile Column Descriptions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/physical-operators/">Physical Operators</a></li>
              
            </ul>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Log and Debug</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/log-and-debug-introduction/">Log and Debug Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/error-messages/">Error Messages</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/modify-logback-xml/">Modify logback.xml</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/review-the-java-stack-trace/">Review the Java Stack Trace</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/query-audit-logging/">Query Audit Logging</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">SQL Reference</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/sql-reference-introduction/">SQL Reference Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Data Types</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/supported-data-types/">Supported Data Types</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/date-time-and-timestamp/">Date, Time, and Timestamp</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/handling-different-data-types/">Handling Different Data Types</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/lexical-structure/">Lexical Structure</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/operators/">Operators</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Functions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/about-sql-function-examples/">About SQL Function Examples</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/math-and-trig/">Math and Trig</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/data-type-conversion/">Data Type Conversion</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/date-time-functions-and-arithmetic/">Date/Time Functions and Arithmetic</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/string-manipulation/">String Manipulation</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/aggregate-and-aggregate-statistical/">Aggregate and Aggregate Statistical</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/functions-for-handling-nulls/">Functions for Handling Nulls</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Window Functions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/sql-window-functions-introduction/">SQL Window Functions Introduction</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/aggregate-window-functions/">Aggregate Window Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/ranking-window-functions/">Ranking Window Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/value-window-functions/">Value Window Functions</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/sql-window-functions-examples/">SQL Window Functions Examples</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Nested Data Functions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/nested-data-limitations/">Nested Data Limitations</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/flatten/">FLATTEN</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/kvgen/">KVGEN</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/repeated-count/">REPEATED_COUNT</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/repeated-contains/">REPEATED_CONTAINS</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/query-directory-functions/">Query Directory Functions</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Commands</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/supported-sql-commands/">Supported SQL Commands</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/alter-session/">ALTER SESSION</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/alter-system/">ALTER SYSTEM</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/create-table-as-ctas/">CREATE TABLE AS (CTAS)</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/partition-by-clause/">PARTITION BY Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/create-view/">CREATE VIEW</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/describe/">DESCRIBE</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/drop-table/">DROP TABLE</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/drop-view/">DROP VIEW</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/explain/">EXPLAIN</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/select/">SELECT</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/select-list/">SELECT List</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/from-clause/">FROM Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/group-by-clause/">GROUP BY Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/having-clause/">HAVING Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/limit-clause/">LIMIT Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/offset-clause/">OFFSET Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/order-by-clause/">ORDER BY Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/union-set-operator/">UNION Set Operator</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/where-clause/">WHERE Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/with-clause/">WITH Clause</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/show-databases-and-show-schemas/">SHOW DATABASES and SHOW SCHEMAS</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/show-files/">SHOW FILES</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/show-tables/">SHOW TABLES</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/use/">USE</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">SQL Conditional Expressions</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/case/">CASE</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/reserved-keywords/">Reserved Keywords</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/sql-extensions/">SQL Extensions</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Data Sources and File Formats</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/data-sources-and-file-formats-introduction/">Data Sources and File Formats Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/hive-to-drill-data-type-mapping/">Hive-to-Drill Data Type Mapping</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/deploying-and-using-a-hive-udf/">Deploying and Using a Hive UDF</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/parquet-format/">Parquet Format</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/json-data-model/">JSON Data Model</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/text-files-csv-tsv-psv/">Text Files: CSV, TSV, PSV</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/sequence-files/">Sequence Files</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Develop Custom Functions</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/develop-custom-functions-introduction/">Develop Custom Functions Introduction</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/developing-a-simple-function/">Developing a Simple Function</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/tutorial-develop-a-simple-function/">Tutorial: Develop a Simple Function</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/developing-an-aggregate-function/">Developing an Aggregate Function</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/adding-custom-functions-to-drill/">Adding Custom Functions to Drill</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/using-custom-functions-in-queries/">Using Custom Functions in Queries</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/custom-function-interfaces/">Custom Function Interfaces</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a class="reference internal" href="/drill/docs/troubleshooting/">Troubleshooting</a></li>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Developer Information</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/rest-api/">REST API</a></li>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Develop Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/compiling-drill-from-source/">Compiling Drill from Source</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/drill-patch-review-tool/">Drill Patch Review Tool</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Contribute to Drill</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/apache-drill-contribution-guidelines/">Apache Drill Contribution Guidelines</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/apache-drill-contribution-ideas/">Apache Drill Contribution Ideas</a></li>
              
            </ul>
            
          
            
              <li class="toctree-l2"><a href="javascript: void(0);">Design Docs</a></li>
              <ul style="display: none">
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/drill-plan-syntax/">Drill Plan Syntax</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/rpc-overview/">RPC Overview</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/query-stages/">Query Stages</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/useful-research/">Useful Research</a></li>
              
                <li class="toctree-l3"><a class="reference internal" href="/drill/docs/value-vectors/">Value Vectors</a></li>
              
            </ul>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Release Notes</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-1-3-0-release-notes/">Apache Drill 1.3.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-1-2-0-release-notes/">Apache Drill 1.2.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-1-1-0-release-notes/">Apache Drill 1.1.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-1-0-0-release-notes/">Apache Drill 1.0.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-0-9-0-release-notes/">Apache Drill 0.9.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-0-8-0-release-notes/">Apache Drill 0.8.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-0-7-0-release-notes/">Apache Drill 0.7.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-0-6-0-release-notes/">Apache Drill 0.6.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-m1-release-notes-apache-drill-alpha/">Apache Drill M1 Release Notes (Apache Drill Alpha)</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-m1-release-notes-apache-drill-alpha/">Apache Drill M1 Release Notes (Apache Drill Alpha)</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-0-5-0-release-notes/">Apache Drill 0.5.0 Release Notes</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/apache-drill-0-4-0-release-notes/">Apache Drill 0.4.0 Release Notes</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a href="javascript: void(0);">Sample Datasets</a></li>
          <ul style="display: none">
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/aol-search/">AOL Search</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/enron-emails/">Enron Emails</a></li>
            
          
            
              <li class="toctree-l2"><a class="reference internal" href="/drill/docs/wikipedia-edit-history/">Wikipedia Edit History</a></li>
            
          
          </ul>
        
      
        
          <li class="toctree-l1"><a class="reference internal" href="/drill/docs/project-bylaws/">Project Bylaws</a></li>
        
      
      </ul>

    </div>
  </div>
</aside>


<nav class="breadcrumbs">
  <li><a href="/drill/docs/">Docs</a></li>
 
  
    <li><a href="/drill/docs/query-data/">Query Data</a></li>
  
  <li>Querying HBase</li>
</nav>

<div class="main-content-wrapper">
  <div class="main-content">

    
      <a class="edit-link" href="https://github.com/apache/drill/blob/gh-pages/_docs/query-data/030-querying-hbase.md" target="_blank"><i class="fa fa-pencil-square-o"></i></a>
    

    <div class="int_title left">
      <h1>Querying HBase</h1>

    </div>

    <link href="/drill/css/docpage.css" rel="stylesheet" type="text/css">

    <div class="int_text" align="left">
      
        <p>This section covers the following topics:</p>

<ul>
<li><a href="/drill/docs/querying-hbase/#tutorial-querying-hbase-data">Tutorial--Querying HBase Data</a><br>
A simple tutorial that shows how to use Drill to query HBase data.<br></li>
<li><a href="/drill/docs/querying-hbase/#working-with-hbase-byte-arrays">Working with HBase Byte Arrays</a><br>
How to work with HBase byte arrays for serious applications<br></li>
<li><a href="/drill/docs/querying-hbase/#querying-big-endian-encoded-data">Querying Big Endian-Encoded Data</a><br>
How to use optimization features in Drill 1.2 and later<br></li>
<li><a href="/drill/docs/querying-hbase/#leveraging-hbase-ordered-byte-encoding">Leveraging HBase Ordered Byte Encoding</a><br>
How to use Drill 1.2 to leverage new features introduced by <a href="https://issues.apache.org/jira/browse/HBASE-8201">HBASE-8201 Jira</a></li>
</ul>

<h2 id="tutorial--querying-hbase-data">Tutorial--Querying HBase Data</h2>

<p>This tutorial shows how to connect Drill to an HBase data source, create simple HBase tables, and query the data using Drill.</p>

<hr>

<h3 id="configure-the-hbase-storage-plugin">Configure the HBase Storage Plugin</h3>

<p>To query an HBase data source using Drill, first configure the <a href="/drill/docs/hbase-storage-plugin/">HBase storage plugin</a> for your environment. </p>

<hr>

<h3 id="create-the-hbase-tables">Create the HBase tables</h3>

<p>You create two tables in HBase, students and clicks, that you can query with Drill. You use the CONVERT_TO and CONVERT_FROM functions to convert binary text to/from typed data. You use the CAST function to convert the binary data to an INT in step 4 of <a href="/drill/docs/querying-hbase/#query-hbase-tables">Query HBase Tables</a>. When converting an INT or BIGINT number, having a byte count in the destination/source that does not match the byte count of the number in the binary source/destination, use CAST.</p>

<p>To create the HBase tables, complete the following
steps:</p>

<ol>
<li><p>Pipe the following commands to the HBase shell to create students and clicks tables in HBase:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">  echo &quot;create &#39;students&#39;,&#39;account&#39;,&#39;address&#39;&quot; | hbase shell
  echo &quot;create &#39;clicks&#39;,&#39;clickinfo&#39;,&#39;iteminfo&#39;&quot; | hbase shell
</code></pre></div></li>
<li><p>Issue the following command to create a <code>testdata.txt</code> file:</p>

<p><code>cat &gt; testdata.txt</code></p></li>
<li><p>Copy and paste the following <code>put</code> commands on the line below the <strong>cat</strong> command. Press Return, and then CTRL Z to close the file.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">put &#39;students&#39;,&#39;student1&#39;,&#39;account:name&#39;,&#39;Alice&#39;
put &#39;students&#39;,&#39;student1&#39;,&#39;address:street&#39;,&#39;123 Ballmer Av&#39;
put &#39;students&#39;,&#39;student1&#39;,&#39;address:zipcode&#39;,&#39;12345&#39;
put &#39;students&#39;,&#39;student1&#39;,&#39;address:state&#39;,&#39;CA&#39;
put &#39;students&#39;,&#39;student2&#39;,&#39;account:name&#39;,&#39;Bob&#39;
put &#39;students&#39;,&#39;student2&#39;,&#39;address:street&#39;,&#39;1 Infinite Loop&#39;
put &#39;students&#39;,&#39;student2&#39;,&#39;address:zipcode&#39;,&#39;12345&#39;
put &#39;students&#39;,&#39;student2&#39;,&#39;address:state&#39;,&#39;CA&#39;
put &#39;students&#39;,&#39;student3&#39;,&#39;account:name&#39;,&#39;Frank&#39;
put &#39;students&#39;,&#39;student3&#39;,&#39;address:street&#39;,&#39;435 Walker Ct&#39;
put &#39;students&#39;,&#39;student3&#39;,&#39;address:zipcode&#39;,&#39;12345&#39;
put &#39;students&#39;,&#39;student3&#39;,&#39;address:state&#39;,&#39;CA&#39;
put &#39;students&#39;,&#39;student4&#39;,&#39;account:name&#39;,&#39;Mary&#39;
put &#39;students&#39;,&#39;student4&#39;,&#39;address:street&#39;,&#39;56 Southern Pkwy&#39;
put &#39;students&#39;,&#39;student4&#39;,&#39;address:zipcode&#39;,&#39;12345&#39;
put &#39;students&#39;,&#39;student4&#39;,&#39;address:state&#39;,&#39;CA&#39;
put &#39;clicks&#39;,&#39;click1&#39;,&#39;clickinfo:studentid&#39;,&#39;student1&#39;
put &#39;clicks&#39;,&#39;click1&#39;,&#39;clickinfo:url&#39;,&#39;http://www.google.com&#39;
put &#39;clicks&#39;,&#39;click1&#39;,&#39;clickinfo:time&#39;,&#39;2014-01-01 12:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click1&#39;,&#39;iteminfo:itemtype&#39;,&#39;image&#39;
put &#39;clicks&#39;,&#39;click1&#39;,&#39;iteminfo:quantity&#39;,&#39;1&#39;
put &#39;clicks&#39;,&#39;click2&#39;,&#39;clickinfo:studentid&#39;,&#39;student1&#39;
put &#39;clicks&#39;,&#39;click2&#39;,&#39;clickinfo:url&#39;,&#39;http://www.amazon.com&#39;
put &#39;clicks&#39;,&#39;click2&#39;,&#39;clickinfo:time&#39;,&#39;2014-01-01 01:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click2&#39;,&#39;iteminfo:itemtype&#39;,&#39;image&#39;
put &#39;clicks&#39;,&#39;click2&#39;,&#39;iteminfo:quantity&#39;,&#39;1&#39;
put &#39;clicks&#39;,&#39;click3&#39;,&#39;clickinfo:studentid&#39;,&#39;student2&#39;
put &#39;clicks&#39;,&#39;click3&#39;,&#39;clickinfo:url&#39;,&#39;http://www.google.com&#39;
put &#39;clicks&#39;,&#39;click3&#39;,&#39;clickinfo:time&#39;,&#39;2014-01-01 01:02:01.0001&#39;
put &#39;clicks&#39;,&#39;click3&#39;,&#39;iteminfo:itemtype&#39;,&#39;text&#39;
put &#39;clicks&#39;,&#39;click3&#39;,&#39;iteminfo:quantity&#39;,&#39;2&#39;
put &#39;clicks&#39;,&#39;click4&#39;,&#39;clickinfo:studentid&#39;,&#39;student2&#39;
put &#39;clicks&#39;,&#39;click4&#39;,&#39;clickinfo:url&#39;,&#39;http://www.ask.com&#39;
put &#39;clicks&#39;,&#39;click4&#39;,&#39;clickinfo:time&#39;,&#39;2013-02-01 12:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click4&#39;,&#39;iteminfo:itemtype&#39;,&#39;text&#39;
put &#39;clicks&#39;,&#39;click4&#39;,&#39;iteminfo:quantity&#39;,&#39;5&#39;
put &#39;clicks&#39;,&#39;click5&#39;,&#39;clickinfo:studentid&#39;,&#39;student2&#39;
put &#39;clicks&#39;,&#39;click5&#39;,&#39;clickinfo:url&#39;,&#39;http://www.reuters.com&#39;
put &#39;clicks&#39;,&#39;click5&#39;,&#39;clickinfo:time&#39;,&#39;2013-02-01 12:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click5&#39;,&#39;iteminfo:itemtype&#39;,&#39;text&#39;
put &#39;clicks&#39;,&#39;click5&#39;,&#39;iteminfo:quantity&#39;,&#39;100&#39;
put &#39;clicks&#39;,&#39;click6&#39;,&#39;clickinfo:studentid&#39;,&#39;student3&#39;
put &#39;clicks&#39;,&#39;click6&#39;,&#39;clickinfo:url&#39;,&#39;http://www.google.com&#39;
put &#39;clicks&#39;,&#39;click6&#39;,&#39;clickinfo:time&#39;,&#39;2013-02-01 12:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click6&#39;,&#39;iteminfo:itemtype&#39;,&#39;image&#39;
put &#39;clicks&#39;,&#39;click6&#39;,&#39;iteminfo:quantity&#39;,&#39;1&#39;
put &#39;clicks&#39;,&#39;click7&#39;,&#39;clickinfo:studentid&#39;,&#39;student3&#39;
put &#39;clicks&#39;,&#39;click7&#39;,&#39;clickinfo:url&#39;,&#39;http://www.ask.com&#39;
put &#39;clicks&#39;,&#39;click7&#39;,&#39;clickinfo:time&#39;,&#39;2013-02-01 12:45:01.0001&#39;
put &#39;clicks&#39;,&#39;click7&#39;,&#39;iteminfo:itemtype&#39;,&#39;image&#39;
put &#39;clicks&#39;,&#39;click7&#39;,&#39;iteminfo:quantity&#39;,&#39;10&#39;
put &#39;clicks&#39;,&#39;click8&#39;,&#39;clickinfo:studentid&#39;,&#39;student4&#39;
put &#39;clicks&#39;,&#39;click8&#39;,&#39;clickinfo:url&#39;,&#39;http://www.amazon.com&#39;
put &#39;clicks&#39;,&#39;click8&#39;,&#39;clickinfo:time&#39;,&#39;2013-02-01 22:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click8&#39;,&#39;iteminfo:itemtype&#39;,&#39;image&#39;
put &#39;clicks&#39;,&#39;click8&#39;,&#39;iteminfo:quantity&#39;,&#39;1&#39;
put &#39;clicks&#39;,&#39;click9&#39;,&#39;clickinfo:studentid&#39;,&#39;student4&#39;
put &#39;clicks&#39;,&#39;click9&#39;,&#39;clickinfo:url&#39;,&#39;http://www.amazon.com&#39;
put &#39;clicks&#39;,&#39;click9&#39;,&#39;clickinfo:time&#39;,&#39;2013-02-01 22:01:01.0001&#39;
put &#39;clicks&#39;,&#39;click9&#39;,&#39;iteminfo:itemtype&#39;,&#39;image&#39;
put &#39;clicks&#39;,&#39;click9&#39;,&#39;iteminfo:quantity&#39;,&#39;10&#39;
</code></pre></div></li>
<li><p>Issue the following command to put the data into HBase:  </p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cat testdata.txt | hbase shell
</code></pre></div></li>
</ol>

<hr>

<h3 id="query-hbase-tables">Query HBase Tables</h3>

<p><a href="/drill/docs/installing-drill-in-embedded-mode/">Start Drill</a> and complete the following steps to query the HBase tables you created.</p>

<ol>
<li>Use the HBase storage plugin configuration.<br>
<code>USE hbase;</code><br></li>
<li><p>Issue the following query to see the data in the students table:<br>
<code>SELECT * FROM students;</code>  </p>

<p>The query returns results that are not useable. In the next step, you convert the data from byte arrays to UTF8 types that are meaningful.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">+-------------+-----------------------+---------------------------------------------------------------------------+
|  row_key    |  account              |                                address                                    |
+-------------+-----------------------+---------------------------------------------------------------------------+
| [B@e6d9eb7  | {&quot;name&quot;:&quot;QWxpY2U=&quot;}   | {&quot;state&quot;:&quot;Q0E=&quot;,&quot;street&quot;:&quot;MTIzIEJhbGxtZXIgQXY=&quot;,&quot;zipcode&quot;:&quot;MTIzNDU=&quot;}     |
| [B@2823a2b4 | {&quot;name&quot;:&quot;Qm9i&quot;}       | {&quot;state&quot;:&quot;Q0E=&quot;,&quot;street&quot;:&quot;MSBJbmZpbml0ZSBMb29w&quot;,&quot;zipcode&quot;:&quot;MTIzNDU=&quot;}     |
| [B@3b8eec02 | {&quot;name&quot;:&quot;RnJhbms=&quot;}   | {&quot;state&quot;:&quot;Q0E=&quot;,&quot;street&quot;:&quot;NDM1IFdhbGtlciBDdA==&quot;,&quot;zipcode&quot;:&quot;MTIzNDU=&quot;}     |
| [B@242895da | {&quot;name&quot;:&quot;TWFyeQ==&quot;}   | {&quot;state&quot;:&quot;Q0E=&quot;,&quot;street&quot;:&quot;NTYgU291dGhlcm4gUGt3eQ==&quot;,&quot;zipcode&quot;:&quot;MTIzNDU=&quot;} |
+-------------+-----------------------+---------------------------------------------------------------------------+
4 rows selected (1.335 seconds)
</code></pre></div></li>
<li><p>Issue the following query, that includes the CONVERT_FROM function, to convert the <code>students</code> table to typed data:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"> SELECT CONVERT_FROM(row_key, &#39;UTF8&#39;) AS studentid, 
        CONVERT_FROM(students.account.name, &#39;UTF8&#39;) AS name, 
        CONVERT_FROM(students.address.state, &#39;UTF8&#39;) AS state, 
        CONVERT_FROM(students.address.street, &#39;UTF8&#39;) AS street, 
        CONVERT_FROM(t.students.address.zipcode, &#39;UTF8&#39;) AS zipcode 
 FROM students;
</code></pre></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Use dot notation to drill down to a column in an HBase table: tablename.columnfamilyname.columnnname  </p>
</div>

<p>The query returns results that look much better:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">+------------+------------+------------+------------------+------------+
| studentid  |    name    |   state    |       street     |  zipcode   |
+------------+------------+------------+------------------+------------+
| student1   | Alice      | CA         | 123 Ballmer Av   | 12345      |
| student2   | Bob        | CA         | 1 Infinite Loop  | 12345      |
| student3   | Frank      | CA         | 435 Walker Ct    | 12345      |
| student4   | Mary       | CA         | 56 Southern Pkwy | 12345      |
+------------+------------+------------+------------------+------------+
4 rows selected (0.504 seconds)
</code></pre></div></li>
<li><p>Query the clicks table to see which students visited google.com:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SELECT CONVERT_FROM(row_key, &#39;UTF8&#39;) AS clickid, 
       CONVERT_FROM(clicks.clickinfo.studentid, &#39;UTF8&#39;) AS studentid, 
       CONVERT_FROM(clicks.clickinfo.`time`, &#39;UTF8&#39;) AS `time`,
       CONVERT_FROM(clicks.clickinfo.url, &#39;UTF8&#39;) AS url 
FROM clicks WHERE clicks.clickinfo.url LIKE &#39;%google%&#39;; 

+------------+------------+--------------------------+-----------------------+
|  clickid   | studentid  |           time           |         url           |
+------------+------------+--------------------------+-----------------------+
| click1     | student1   | 2014-01-01 12:01:01.0001 | http://www.google.com |
| click3     | student2   | 2014-01-01 01:02:01.0001 | http://www.google.com |
| click6     | student3   | 2013-02-01 12:01:01.0001 | http://www.google.com |
+------------+------------+--------------------------+-----------------------+
3 rows selected (0.294 seconds)
</code></pre></div></li>
<li><p>Query the clicks table to get the studentid of the student having 100 items. Use CONVERT_FROM to convert the textual studentid and itemtype data, but use CAST to convert the integer quantity.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SELECT CONVERT_FROM(tbl.clickinfo.studentid, &#39;UTF8&#39;) AS studentid, 
       CONVERT_FROM(tbl.iteminfo.itemtype, &#39;UTF8&#39;), 
       CAST(tbl.iteminfo.quantity AS INT) AS items 
FROM clicks tbl WHERE tbl.iteminfo.quantity=100;

+------------+------------+------------+
| studentid  |   EXPR$1   |   items    |
+------------+------------+------------+
| student2   | text       | 100        |
+------------+------------+------------+
1 row selected (0.656 seconds)
</code></pre></div></li>
</ol>

<h2 id="working-with-hbase-byte-arrays">Working with HBase Byte Arrays</h2>

<p>The trivial example in the previous section queried little endian-encoded data in HBase. For serious applications, you need to understand how to work with HBase byte arrays. If you want Drill to interpret the underlying HBase row key as something other than a byte array, you need to know the encoding of the data in HBase. By default, HBase stores data in little endian and Drill assumes the data is little endian, which is unsorted. The following table shows the sorting of typical row key IDs in bytes, encoded in little endian and big endian, respectively:</p>

<table><thead>
<tr>
<th>IDs in Byte Notation Little Endian Sorting</th>
<th>IDs in Decimal Notation</th>
<th>IDs in Byte Notation Big Endian Sorting</th>
<th>IDs in Decimal Notation</th>
</tr>
</thead><tbody>
<tr>
<td>0 x 010000 . . . 000</td>
<td>1</td>
<td>0 x 00000001</td>
<td>1</td>
</tr>
<tr>
<td>0 x 010100 . . . 000</td>
<td>17</td>
<td>0 x 00000002</td>
<td>2</td>
</tr>
<tr>
<td>0 x 020000 . . . 000</td>
<td>2</td>
<td>0 x 00000003</td>
<td>3</td>
</tr>
<tr>
<td>. . .</td>
<td></td>
<td>0 x 00000004</td>
<td>4</td>
</tr>
<tr>
<td>0 x 050000 . . . 000</td>
<td>5</td>
<td>0 x 00000005</td>
<td>5</td>
</tr>
<tr>
<td>. . .</td>
<td></td>
<td>. . .</td>
<td></td>
</tr>
<tr>
<td>0 x 0A0000 . . . 000</td>
<td>10</td>
<td>0 x 0000000A</td>
<td>10</td>
</tr>
<tr>
<td></td>
<td></td>
<td>0 x 00000101</td>
<td>17</td>
</tr>
</tbody></table>

<h2 id="querying-big-endian-encoded-data">Querying Big Endian-Encoded Data</h2>

<p>Drill optimizes scans of HBase tables when you use the <a href="/drill/docs/supported-data-types/#data-types-for-convert_to-and-convert_from-functions">&quot;CONVERT_TO and CONVERT_FROM data types&quot;</a> on big endian-encoded data. Drill provides the *_BE encoded types for use with CONVERT_TO and CONVERT_FROM to take advantage of these optimizations. Here are a few examples of the *_BE types.</p>

<ul>
<li>DATE_EPOCH_BE<br></li>
<li>TIME_EPOCH_BE<br></li>
<li>TIMESTAMP_EPOCH_BE<br></li>
<li>UINT8_BE<br></li>
<li>BIGINT_BE<br></li>
</ul>

<p>For example, Drill returns results performantly when you use the following query on big endian-encoded data:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SELECT
  CONVERT_FROM(BYTE_SUBSTR(row_key, 1, 8), &#39;DATE_EPOCH_BE&#39;) d,
  CONVERT_FROM(BYTE_SUBSTR(row_key, 9, 8), &#39;BIGINT_BE&#39;) id,
  CONVERT_FROM(tableName.f.c, &#39;UTF8&#39;) 
FROM hbase.`TestTableCompositeDate` tableName
WHERE
  CONVERT_FROM(BYTE_SUBSTR(row_key, 1, 8), &#39;DATE_EPOCH_BE&#39;) &lt; DATE &#39;2015-06-18&#39; AND
  CONVERT_FROM(BYTE_SUBSTR(row_key, 1, 8), &#39;DATE_EPOCH_BE&#39;) &gt; DATE &#39;2015-06-13&#39;;
</code></pre></div>
<p>This query assumes that the row key of the table represents the DATE_EPOCH type encoded in big-endian format. The Drill HBase plugin will be able to prune the scan range since there is a condition on the big endian-encoded prefix of the row key. For more examples, see the <a href="https://github.com/apache/drill/blob/95623912ebf348962fe8a8846c5f47c5fdcf2f78/contrib/storage-hbase/src/test/java/org/apache/drill/hbase/TestHBaseFilterPushDown.java">test code</a>.</p>

<p>To query HBase data:</p>

<ol>
<li><p>Connect the data source to Drill using the <a href="/drill/docs/hbase-storage-plugin/">HBase storage plugin</a>.  </p>

<p><code>USE hbase;</code></p></li>
<li><p>Determine the encoding of the HBase data you want to query. Ask the person in charge of creating the data.  </p></li>
<li><p>Based on the encoding type of the data, use the <a href="/drill/docs/supported-data-types/#data-types-for-convert_to-and-convert_from-functions">&quot;CONVERT_TO and CONVERT_FROM data types&quot;</a> to convert HBase binary representations to an SQL type as you query the data.<br>
For example, use CONVERT_FROM in your Drill query to convert a big endian-encoded row key to an SQL BIGINT type:  </p>

<p><code>SELECT CONVERT_FROM(BYTE_SUBSTR(row_key, 1, 8),&#39;BIGINT_BE) FROM my_hbase_table;</code></p></li>
</ol>

<p>The <a href="/drill/docs/string-manipulation/#byte_substr">BYTE_SUBSTR function</a> separates parts of a HBase composite key in this example. The Drill optimization is based on the capability in Drill 1.2 and later to push conditional filters down to the storage layer when HBase data is in big endian format. </p>

<p>Drill can performantly query HBase data that uses composite keys, as shown in the last example, if only the first component of the composite is encoded in big endian format. If the HBase row key is not stored in big endian, do not use the *_BE types. If you want to convert a little endian byte array to integer, use BIGINT instead of BIGINT_BE, for example, as an argument to CONVERT_FROM. </p>

<h2 id="leveraging-hbase-ordered-byte-encoding">Leveraging HBase Ordered Byte Encoding</h2>

<p>Drill 1.2 leverages new features introduced by <a href="https://issues.apache.org/jira/browse/HBASE-8201">HBASE-8201 Jira</a> that allows ordered byte encoding of different data types. This encoding scheme preserves the sort order of the native data type when the data is stored as sorted byte arrays on disk. Thus, Drill will be able to process data through the HBase storage plugin if the row keys have been encoded in OrderedBytes format.</p>

<p>To execute the following query, Drill prunes the scan range to only include the row keys representing [-32,59] range, thus reducing the amount of data read.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">SELECT
 CONVERT_FROM(t.row_key, &#39;INT_OB&#39;) rk,
 CONVERT_FROM(t.`f`.`c`, &#39;UTF8&#39;) val
FROM
  hbase.`TestTableIntOB` t
WHERE
  CONVERT_FROM(row_key, &#39;INT_OB&#39;) &gt;= cast(-32 as INT) AND
  CONVERT_FROM(row_key, &#39;INT_OB&#39;) &lt; cast(59 as INT);
</code></pre></div>
<p>For more examples, see the <a href="https://github.com/apache/drill/blob/95623912ebf348962fe8a8846c5f47c5fdcf2f78/contrib/storage-hbase/src/test/java/org/apache/drill/hbase/TestHBaseFilterPushDown.java">test code</a>.</p>

<p>By taking advantage of ordered byte encoding, Drill 1.2 and later can performantly execute conditional queries without a secondary index on HBase big endian data. </p>

    
      
        <div class="doc-nav">
  
  <span class="previous-toc"><a href="/drill/docs/querying-sequence-files/"> Querying Sequence Files</a></span><span class="next-toc"><a href="/drill/docs/querying-complex-data/">Querying Complex Data </a></span>
</div>

    
    </div>
  </div>
</div>

  </div>
  <p class="push"></p>
<div id="footer" class="mw">
<div class="wrapper">
Copyright  2012-2014 The Apache Software Foundation, licensed under the Apache License, Version 2.0.<br>
Apache and the Apache feather logo are trademarks of The Apache Software Foundation. Other names appearing on the site may be trademarks of their respective owners.<br/><br/>
</div>
</div>

  <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-53379651-1', 'auto');
ga('send', 'pageview');
</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-548b2caa33765e8d" async="async"></script>
</body>
</html>
